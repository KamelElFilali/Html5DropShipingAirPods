(window.webpackJsonp=window.webpackJsonp||[]).push([[64],{3994:function(e,t,r){var n,o,i,a,s,l,u,m,c,d,p,h,g,b,f,v,y,_,w,x,M,E,C,k,A,T=function(e,t){return function(){return e.apply(t,arguments)}},O={}.hasOwnProperty,S=[].indexOf||function(e){for(var t=0,r=this.length;t<r;t++)if(t in this&&this[t]===e)return t;return-1};r(14),M=r(3),n=r(1422),o=r(56),i=r(73),E=r(16).avatarDomain,a=r(15),r(68),C=r(27),l=r(53),s=r(4913),u=r(5238),m=r(288),k=r(739).maybeDisplayOrgMemberLimitsError,c=r(5245),d=r(37),p=r(5250),h=r(4915),g=r(5251),b=r(4069),v=r(29),f=r(19),y=r(0),_=r(65),w=r(345).ReactRootComponent,x=r(5266),r(48)("org_members"),A=r(1).track,r(148),e.exports=function(e){function t(){return this.changeMemberTypeFilter=T(this.changeMemberTypeFilter,this),t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)O.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype}(t,b),t.prototype.fetchBoards=function(){return this.isFetchingBoards=!this.model.get("hasLoadedMembersBoards"),d.loadOrganizationMembersBoards(this.model.id).tap((e=this,function(){return e.isFetchingBoards=!1,e.model.set("hasLoadedMembersBoards",!0)}));var e},t.prototype.fetchCollaborators=function(){return this.model.get("hasLoadedMembersCollaborators")||this.isFetchingCollaborators?v.resolve():(this.isFetchingCollaborators=!0,d.loadOrganizationMembersCollaborators(this.model.id).tap((e=this,function(){return e.isFetchingCollaborators=!1,e.model.set("hasLoadedMembersCollaborators",!0)})));var e},t.prototype.initialize=function(e){var r,n,o,i,s,l;for(o=e.initialMemberTypeFilter,this.routeToMemberType=e.routeToMemberType,t.__super__.initialize.apply(this,arguments),this.memberTypeFilter=o,this.getGoogleAppsData(),l=this.frameDebounce(this.renderReactSection),this.listenTo(this.model,{"change:idBoards":l}),this.listenTo(this.model,{"change:memberships":l}),this.listenTo(this.model,{"change:memberships":this.getCollaborators}),this.listenTo(this.model,{"change:collaborators":l}),this.listenTo(this.model,{"change:bulkAddMemberErrors":l}),this.listenTo(a.me(),"change:messagesDismissed",l),n=0,i=(s=this.model.boardList.models).length;n<i;n++)r=s[n],this.listenTo(r.memberList,"add remove reset",l);this.fetchBoards(),this.fetchCollaborators()},t.prototype.isFullWidth=function(){return!0},t.prototype.renderMainContent=function(){return null==this.reactRoot&&(this.reactRoot=document.createElement("div")),this.$(".js-content").append(this.reactRoot),this.renderReactSection(),this.setActiveView(".js-org-members"),this},t.prototype.renderReactSection=function(){return _.render(this.getReactRoot(),this.reactRoot),this},t.prototype.getReactRoot=function(){return y.createElement(w,{},this.getOrgMembersComponent())},t.prototype.changeMemberTypeFilter=function(e){return this.memberTypeFilter=e,this.routeToMemberType(e),this.renderReactSection()},t.prototype.getOrgMembersComponent=function(){var e,t,r,n,o,i,a;return a=(n=this.getMembers()).map(function(e){return e.id}),e=this.calculateBoardCountPerMember(),t=this.getCollaboratorProps(a,e),r=this.getEnterpriseProps(),o=this.getOrgProps(n,e),i={isEnterpriseAdmin:r.isEnterpriseAdmin,orgName:o.orgName,orgIsEmpty:o.orgIsEmpty,orgMemberModels:o.orgMemberModels,orgId:o.orgId,orgIsPO:o.orgIsPO,orgIsBC:o.orgIsBC,orgAllAdminsEnabled:o.orgAllAdminsEnabled,orgBillingUrl:o.orgBillingUrl,collaboratorModels:t.collaboratorModels,sidebar:this.orgToOrgSidebarProps(),memberTypeFilter:this.memberTypeFilter,changeMemberTypeFilter:this.changeMemberTypeFilter,isFetchingBoards:this.isFetchingBoards,isFetchingCollaborators:this.isFetchingCollaborators},y.createElement(g,i)},t.prototype.orgToOrgSidebarProps=function(){var e,t,r;return e=(t=a.me()).isAdDismissed("security-features"),{canManageMembers:this.model.editable(),canLinkGoogleApps:this.model.isFeatureEnabled("googleApps")&&(!this.model.get("prefs").associatedDomain||this.googleAppsFetchFailed)&&this.model.editable(),canShowAll:this.model.isFeatureEnabled("googleApps")&&M.any(this.mappingsData,(r=this,function(e){var t;return(null!=(t=r.modelCache.findOne("Member","gMail",e.gMail))?t.get("hidden"):void 0)||e.hidden})),onLinkGoogleApps:this.startLinkingGoogleApps.bind(this),openManageMembers:this.openManageMembers.bind(this),openBulkAdd:this.openBulkAdd.bind(this),billingUrl:l.getOrganizationBillingUrl(this.model),hasBC:this.model.isPremium(),ownsOrg:this.model.owned(),isAdDismissed:e,dismissAd:t.dismissAd.bind(t,"security-features"),inviteTeamMembers:this.inviteTeamMembers.bind(this)||null,model:this.model,bulkAddMemberErrors:this.model.getBulkAddMemberErrors(),isFetchingCollaborators:this.isFetchingCollaborators}},t.prototype.getGoogleAppsData=function(){var e;if(this.model.isLinkedToGoogleApps()&&this.model.editable())return this.model.getGoogleAppsMappings().then((e=this,function(t){return e.mappingsData=t})).catch(function(e){return function(t){return e.googleAppsFetchFailed=!0}}(this)).finally(function(e){return function(){return e.renderMainContent()}}(this)).done()},t.prototype.startLinkingGoogleApps=function(e){return A("Organization View","Members Page","Start Linking Google Apps Domain"),f.toggle({elem:e,view:h,options:{model:this.model,modelCache:this.modelCache}})},t.prototype.openManageMembers=function(e){A("Organization View","Members Page","Open Manage Members"),f.toggle({elem:e,getViewTitle:function(){return C(["view title","members"])},reactElement:y.createElement(u,{key:"members",model:this.model,modelCache:this.modelCache})})},t.prototype.inviteTeamMembers=function(e){A("Organization View","Members Page","Invite Team Members"),f.toggle({elem:e,getViewTitle:function(){return C(["view title","add members"])},reactElement:y.createElement(u,{key:"members",model:this.model,modelCache:this.modelCache})})},t.prototype.openBulkAdd=function(e){A("Organization View","Members Page","Open Bulk Add"),k(e,this.model,null)||f.toggle({elem:e,getViewTitle:function(){return C(["view title","add members"])},reactElement:y.createElement(s,{key:"bulk add members",model:this.model})})},t.prototype.memberToModelForMemberItemElement=function(e,t){var r;return{isVirtual:"virtual"===(r=this.model.getMemberType(e,{ignoreEntAdminStatus:!0})),isDeactivated:"deactivated"===r,fullName:e.get("fullName"),username:e.get("username"),showGoogleApps:this.model.isLinkedToGoogleApps()&&this.model.editable()&&null!=this.mappingsData,gMail:e.get("gMail"),boardCount:t,isOrgMember:"public"!==r,showActivity:this.model.owned(),allowTypeChange:this.model.owned()&&"deactivated"!==r&&"unconfirmed"!==r&&"virtual"!==r,orgMemberType:C(["member types",r]),allowReactivate:this.model.owned()&&"deactivated"===r,isMe:a.isMe(e),canRemove:e.getMembershipData(this.model).canRemove,orgIsBC:this.model.isPremium(),ownsOrg:this.model.owned(),hidden:e.get("hidden"),onViewActivity:this.viewMemberActivity.bind(this,e),onRoleChange:this.changeRole.bind(this,e),onRemoveOrDeactivate:this.removeOrDeactivate.bind(this,e),avatarHash:e.get("avatarHash"),avatarDomain:E,initials:e.get("initials"),isOrganizationAdmin:"admin"===r,onReactivateClick:this.reactivateMember.bind(this,e),onUnhideMember:this.unhideMember.bind(this,e),onHideMember:this.hideMember.bind(this,e),onInviteMember:this.inviteToOrg.bind(this,e),onAddToTeam:this.addToTeam.bind(this,e)}},t.prototype.getCollaborators=function(){return this.model.fetchCollaborators().catch(function(e){return null}).finally((e=this,function(){return e.renderReactSection()}));var e},t.prototype.isCurrentEnterpriseAdmin=function(){return M.some(a.me().get("idEnterprisesAdmin"),(e=this,function(t){var r;return t===(null!=(r=e.model.getEnterprise())?r.get("id"):void 0)}));var e},t.prototype.getEnterpriseProps=function(){return{isEnterpriseAdmin:this.isCurrentEnterpriseAdmin()}},t.prototype.calculateBoardCountPerMember=function(){var e;return e={},this.model.boardList.models.forEach(function(t){if(t.isOpen())return t.memberList.models.forEach(function(t){var r;return null==e[r=t.id]&&(e[r]=0),e[t.id]+=1})}),e},t.prototype.getOrgProps=function(e,t){var r,n;return r=e.map((n=this,function(e){var r;return n.memberToModelForMemberItemElement(e,null!=(r=t[e.id])?r:0)})),{orgId:this.model.id,orgName:this.model.get("displayName"),orgIsEmpty:1===r.length&&M.some(r,function(e){return e.isMe&&e.isOrganizationAdmin}),orgMemberModels:r,orgIsPO:this.model.paysWithPurchaseOrder(),orgIsBC:this.model.isBusinessClass(),orgAllAdminsEnabled:this.model.get("allAdminsEnabled"),orgBillingUrl:l.getOrganizationBillingUrl(this.model)}},t.prototype.getCollaboratorProps=function(e,t){return{collaboratorModels:this.model.collaboratorList.models.reduce((r=this,function(n,o){var i,a,s;return a=o.id,S.call(e,a)>=0?n:(i=null!=(s=t[o.id])?s:0)<1?n:(n.push(r.memberToModelForMemberItemElement(o,i)),n)}),[])};var r},t.prototype.getMembers=function(){var e,t,r,n,o,i,a,s,l,u,c,d,p,h,g;if(d=M.clone(this.model.memberList.models),e=null!=(p=this.model.collaboratorList.models)?p.map(function(e){return e.id}):void 0,null!=this.mappingsData)for(n=0,a=(h=this.mappingsData).length;n<a;n++)null!=(g=h[n]).idMember?null==(c=this.modelCache.get("Member",g.idMember))?c=new m({id:g.idMember,fullName:g.fullName,gMail:g.gMail,initials:g.initials,hidden:g.hidden},{modelCache:this.modelCache}):c.set("gMail",g.gMail):null==(c=this.modelCache.findOne("Member","gMail",g.gMail))&&(c=new m({fullName:g.fullName,gMail:g.gMail,initials:g.initials,hidden:g.hidden},{modelCache:this.modelCache}),g.idMember=c.cid),S.call(d,c)<0&&e.indexOf(g.idMember)<0&&d.push(c);for(t=[],o=0,s=d.length;o<s;o++)u=d[o],"deactivated"===this.model.getMemberType(u)&&t.push(u);for(r=[],i=0,l=d.length;i<l;i++)u=d[i],"virtual"===this.model.getMemberType(u)&&r.push(u);return M.difference(d,r,t).concat(t).concat(r)},t.prototype.inviteToOrg=function(e){return A("Organization View","Members Page","Add Google Apps Member"),v.try((t=this,function(){return e.id?t.model.changeMemberRole(e,{type:"normal"}):t.model.addMemberRole({fullName:e.get("fullName"),email:e.get("gMail"),type:"normal"}).then(function(){return o.show("invitation sent","info","alert",3e3)})})).catch(i,function(e){o.showLiteralText(e.localizedMessage(),"error","alert",3e3),A("Invitations","Error: "+e.message)}).done();var t},t.prototype.addToTeam=function(e,t){var r,i;return A("Organization View","Members Page","Add Guest to Team"),(r=(i=this.model).isBusinessClass())?f.toggle({elem:t,view:new n({isBC:r,model:e,org:i,showAlert:!0,isOrgView:!0})}):k(t,i,e)?void 0:i.addMembers(e).then(function(e){return null!=e[e._categories.ADDED]&&o.show("added to team","confirm","info",3e3),f.hide()})},t.prototype.hideMember=function(e){if(e.get("gMail"))return e.set("hidden",!0),this.model.toggleMemberHidden(e,{type:"post"}),this.renderReactSection()},t.prototype.unhideMember=function(e){if(e.get("gMail"))return e.set("hidden",!1),this.model.toggleMemberHidden(e,{type:"delete"}),this.renderReactSection()},t.prototype.reactivateMember=function(e,t){return A("Organization View","Members Page","Reactivate"),this.model.reactivateMember(e).catch(i,function(e){o.showLiteralText(e.localizedMessage(),"error","alert",3e3),A("Invitations","Error: "+e.message)}).done()},t.prototype.removeOrDeactivate=function(e,t){A("Organization View","Members Page","Remove or Deactivate Member Button"),f.toggle({elem:t,view:x,options:{model:e,org:this.model,modelCache:this.modelCache,onRemoveSuccess:function(){if(!a.isMe(e))return o.show("removed from team","warning","info",3e3)}}})},t.prototype.viewMemberActivity=function(e,t){A("Organization View","Members Page","View Member Activity"),f.toggle({elem:t,view:c,options:{model:e,org:this.model,modelCache:this.modelCache}})},t.prototype.changeRole=function(e,t){A("Organization View","Members Page","Change Role Button"),f.toggle({elem:t,view:p,options:{model:e,parent:this.model,modelCache:this.modelCache}})},t}()},4032:function(e,t,r){var n;n=r(1).track,e.exports=function(){function e(){}return e.prototype.switchSection=function(e){return this.$(".js-content").addClass("hide").detach(),this.$(".js-loading-page").removeClass("hide"),this.$(".tabbed-pane-nav-item-button").removeClass("active"),this.$(e.target).addClass("active"),n(this.model.typeName+" View","Tab Navigation","Open "+this.$(e.target)[0].getAttribute("data-tab")+" Page")},e}()},4034:function(e,t,r){"use strict";r.r(t),r.d(t,"EditAvatar",function(){return k});var n=r(0),o=r.n(n),i=r(6),a=r.n(i),s=r(61),l=r(24),u=r(31),m=r(16),c=r(5),d=r(11),p=r(4076),h=r.n(p),g=r(9),b=r.n(g),f=r(155),v=r(1),y=r(17);function _(){return(_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function w(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function x(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var r=[],n=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(o)throw i}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var M=r(27),E=Object(c.forTemplate)("org_detail"),C=Object(c.forTemplate)("popover_org_logo"),k=function(e){var t,r,i,c,p=e.orgId,g=Object(u.Q)({variables:{id:p}}).data,k=x(Object(u.wc)(),1)[0],A=x(Object(u.N)(),1)[0],T=Object(l.usePopover)(),O=T.triggerRef,S=T.popoverProps,I=T.toggle,j=T.hide,P=x(Object(n.useState)(""),2),B=P[0],N=P[1],z=o.a.createRef(),L=null==g?void 0:null===(t=g.organization)||void 0===t?void 0:t.logoHash,D=null==g?void 0:null===(r=g.member)||void 0===r?void 0:r.id,F=D&&!!(null==g?void 0:null===(i=g.organization)||void 0===i?void 0:i.memberships.find(function(e){return e.idMember===D&&"admin"===e.memberType}));return o.a.createElement(s.ComponentWrapper,null,o.a.createElement("button",{"data-test-id":"profileImage",className:a()((c={},w(c,h.a.container,!0),w(c,h.a.isEditable,F),c)),ref:O,onClick:function(){F&&I()}},L?o.a.createElement("img",{className:h.a.profileImage,src:[m.logoDomain,L,"170.png"].join("/"),alt:""}):o.a.createElement(d.Icon,{className:h.a.profileIcon,name:d.IconName.Organization}),o.a.createElement("span",{className:h.a.profileImageText},E("change-logo"))),o.a.createElement(l.Popover,_({},S,{title:E("change-logo")}),o.a.createElement("div",{"data-test-id":"editAvatarPopover"},B&&o.a.createElement("p",{className:h.a.error},B),o.a.createElement("div",{className:h.a.uploader},o.a.createElement("form",{className:h.a.realFile},o.a.createElement("input",{"data-test-id":"fileInput",type:"file",name:"file",className:h.a.hideInput,onChange:function(e){var t;return regeneratorRuntime.async(function(r){for(;;)switch(r.prev=r.next){case 0:if(e.preventDefault(),N(""),!(e.target.files&&e.target.files.length>0)){r.next=24;break}if(t=e.target.files[0]){r.next=6;break}return r.abrupt("return");case 6:if(b.a.validFileSize(t)){r.next=11;break}return N(M("images can not be larger than 10mb")),Object(v.track)("Organization","Logo","Upload Error - File Too Large"),y.Analytics.sendTrackEvent({action:y.Action.failed,actionSubject:y.ActionSubject.upload,actionSubjectId:y.ActionSubjectId.fileInputUpload,source:y.Source.changeTeamAvatarDialog,attributes:{reason:"file too large"},containers:{organization:{id:p}}}),r.abrupt("return");case 11:return r.prev=11,r.next=14,regeneratorRuntime.awrap(k({variables:{orgId:p,file:t}}));case 14:Object(v.track)("Organization","Logo","Use Uploaded - New"),y.Analytics.sendTrackEvent({action:y.Action.saved,actionSubject:y.ActionSubject.upload,actionSubjectId:y.ActionSubjectId.fileInputUpload,source:y.Source.changeTeamAvatarDialog,attributes:{reason:"new file upload"},containers:{organization:{id:p}}}),j(),r.next=24;break;case 19:r.prev=19,r.t0=r.catch(11),Object(v.track)("Organization","Logo","Error - #{err}"),y.Analytics.sendTrackEvent({action:y.Action.errored,actionSubject:y.ActionSubject.upload,actionSubjectId:y.ActionSubjectId.fileInputUpload,source:y.Source.changeTeamAvatarDialog,attributes:{reason:r.t0.message},containers:{organization:{id:p}}}),N(r.t0.message);case 24:case"end":return r.stop()}},null,null,[[11,19]])},ref:z})),o.a.createElement("button",{className:h.a.popoverButton,onClick:Object(f.a)(function(){var e;null===(e=z.current)||void 0===e||e.click()})},o.a.createElement(d.Icon,{className:h.a.uploadIcon,name:d.IconName.Organization}),C("upload-a-new-logo"))),L&&o.a.createElement("button",{"data-test-id":"deleteLogoButton",className:h.a.popoverButton,onClick:Object(f.a)(function(){A({variables:{orgId:p}}),Object(v.track)("Organization","Logo","Remove Logo"),y.Analytics.sendTrackEvent({action:y.Action.removed,actionSubject:y.ActionSubject.upload,actionSubjectId:y.ActionSubjectId.fileInputUpload,source:y.Source.changeTeamAvatarDialog,containers:{organization:{id:p}}}),j()})},C("remove-logo")))))}},4069:function(e,t,r){var n,o,i,a,s,l,u,m,c,d,p,h,g,b,f,v,y,_,w,x,M,E,C,k,A,T,O,S,I,j=function(e,t){return function(){return e.apply(t,arguments)}},P={}.hasOwnProperty;n=r(14),i=r(15),a=r(4070),s=r(53),c=r(592),o=r(344),h=r(19),f=r(4032),y=r(9),_=r(20),C=r(93).mixin,k=r(1397),O=r(42),S=r(1).track,E=r(373),M=r(27),r(186).logError,I=r(60),A=r(4071),r(33),w=r(16).dontUpsell,d=r(4072),l=r(1398),m=r(308).ErrorViews,g=r(0),b=r(65),T=r(61).renderComponent,v=r(920).TeamfulCollaborationPrompt,x=r(10).featureFlagClient,p=r(4083).OrganizationDetails,u=r(4034).EditAvatar,e.exports=function(e){function t(){return this.unmountEditAvatar=j(this.unmountEditAvatar,this),this.unmountTeamfulCollaborationPrompt=j(this.unmountTeamfulCollaborationPrompt,this),t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)P.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype}(t,_),C(f,t),t.prototype.initialize=function(){var e;this.makeDebouncedMethods("render"),this.listenTo(this.model,"change:logoHash change:products change:paidAccount change:prefs change:name",this.render),this.listenTo(this.model,"change:name change:displayName change:website change:desc",this.renderDetails),this.listenTo(this.model,"change:memberships",this.membershipChange),this.listenTo(this.model.memberList,"add remove reset",this.renderDebounced),this.listenTo(this.model,"change:name",(e=this,function(){var t;return t=location.pathname.replace(/[^\/]+/,e.model.get("name")),history.replaceState(null,null,t)})),this.listenTo(this.model,"change:idEnterprise",function(){return window.location.reload()}),this.listenTo(this.model,{destroy:function(){return s.displayErrorPage({errorType:m.NOT_FOUND})}}),this.memberTypeMe=this.model.getMemberType(i.me()),this.teamfulCollaborationPromptDiv=null,this.teamfulCollaborationPromptComponent=null,this.editAvatarDiv=null},t.prototype.events={"click .js-change-org-logo":"changeLogoInProfile","click .js-edit-profile":"editProfile","click .js-submit-profile":"submitProfile","submit .js-profile-form":"submitProfile","click .js-cancel-edit-profile":"cancelEditProfile","click .tabbed-pane-nav-item-button:not(.active)":"switchSection"},t.prototype.isFullWidth=function(){return!1},t.prototype.render=function(){var e,t,r,n;return t=i.me(),e=this.model.toJSON({prefs:!0,url:!0,premium:!0}),this.model.editable()&&(n=null!=(r=e.paidAccount)?r.standing:void 0,e.hasAccount=o.hasAccount(n),e.accountActive=o.isActive(e.paidAccount),e.accountProblem=o.isProblem(n),e.accountInactive=o.isInactive(n)),e.isInOrg=this.model.isMember(t),e.hasBusinessClass=this.model.isPremium(),e.isEnterprise=this.model.isEnterprise(),e.paysWithPurchaseOrder=this.model.paysWithPurchaseOrder(),e.isOrgAdmin=this.model.owned(),e.isBusinessClassAdmin=this.model.isPremium()&&this.model.owned(),e.pLevelAltText=M(["org perms",this.model.getPermLevel(),"text"]),e.pLevelDisplayText=M(["org perms",this.model.getPermLevel(),"name"]),e.websiteHref=y.sanitizeWebAddress(e.website),e.descriptionHtml=c.markdownAsHtml(e.desc,{textData:e.descData}),e.isFullWidth=this.isFullWidth(),e.editable=this.model.editable(),e.hasUnlimitedPowerUps=this.model.isFeatureEnabled("plugins"),e.upsellEnabled=!w,e.isEnterpriseAdmin=e.isEnterprise&&t.isEnterpriseAdminOf({id:this.model.get("idEnterprise")}),this.$el.empty(),this.$el.html(A(e)),this.renderDetails(),this.renderMainContent(),this.renderBanner(),x.get("btg.team-vertical-selection",!1)&&this.renderOrgAvatar(),this.renderTeamfulCollaborationPrompt(),this},t.prototype.renderBanner=function(){var e,t,r;return e=n(".js-boards-page-banners").empty(),t=this.subview(l,this.model,{}).render(),e.prepend(t.el),t.isShown()||(r=this.subview(d,this.model,{}).render().el,e.prepend(r)),this},t.prototype.renderDetails=function(){var e,t;if(!x.get("btg.team-vertical-selection",!1))return(e=this.model.toJSON({prefs:!0,url:!0,premium:!0})).enterpriseUI=this.model.isFeatureEnabled("enterpriseUI"),e.isBusinessClass=this.model.isPremium(),e.isOrgAdmin=this.model.owned(),e.pLevelAltText=M(["org perms",this.model.getPermLevel(),"text"]),e.pLevelDisplayText=M(["org perms",this.model.getPermLevel(),"name"]),e.websiteHref=y.sanitizeWebAddress(e.website),e.descriptionHtml=c.markdownAsHtml(e.desc,{textData:e.descData}),e.canEdit=this.model.owned(),this.$(".js-current-details").html(k(e)),this.model.editable()&&this.$(".js-profile-form").empty().append(O.fill("org_detail_profile_edit",e,{editable:this.model.editable()})),this;null!=(t=this.$(".js-current-details")[0])&&T(g.createElement(p,{orgId:this.model.id}),t)},t.prototype.delegateEvents=function(e){return t.__super__.delegateEvents.call(this,I(t.prototype.events,e||this.events))},t.prototype.membershipChange=function(){var e;if((e=this.model.getMemberType(i.me()))!==this.memberTypeMe)return this.memberTypeMe=e,this.render()},t.prototype.setActiveView=function(e){this.$(".tabbed-pane-nav-item-button").removeClass("active"),this.$(e).addClass("active")},t.prototype.changeLogoInProfile=function(e){y.stop(e),S("Organization View","Open Change Logo Menu from Profile Image"),h.toggle({elem:this.$(".js-change-org-logo"),view:new a({model:this.model,modelCache:this.modelCache})})},t.prototype.editProfile=function(e){y.stop(e),this.$(".js-current-details").addClass("hide"),this.$(".js-profile-form").removeClass("hide"),S("Organization View","Click Edit Profile")},t.prototype.cancelEditProfile=function(e){y.stop(e),this.$(".js-current-details").removeClass("hide"),this.$(".js-profile-form").addClass("hide"),this.$(".js-profile-form")[0].reset(),S("Organization View","Cancel Edit Profile")},t.prototype.submitProfile=function(e){var t,r,n,o,i,a,s,l;if(y.stop(e),!this.disabled){for(t={},n=0,i=(s=["displayName","name","website","desc"]).length;n<i;n++)t[r=s[n]]=this.$(".js-profile-form [name="+r+"]").val();for(t.name=t.name.toLowerCase().replace(/[^a-z0-9_]/g,""),o=0,a=(l=["displayName","website"]).length;o<a;o++)t[r=l[o]]=t[r].trim();var u;this.disableSubmit(),this.model.update(t,{waitForServer:!0},(u=this,function(e){var t;u.disabled=!1,u.$(".js-submit-profile").removeAttr("disabled"),e?(t=e.message.trim().toLowerCase(),u.$(".js-profile-form-error").removeClass("hide").text(E(t))):(u.$(".js-profile-form-error").addClass("hide"),u.cancelEditProfile(),S("Organization View","Changed Name and Details"))}))}},t.prototype.disableSubmit=function(){this.disabled=!0,this.$(".js-submit-profile").attr("disabled","disabled")},t.prototype.remove=function(){return this.unmountEditAvatar(),this.unmountTeamfulCollaborationPrompt(),t.__super__.remove.apply(this,arguments)},t.prototype.unmountTeamfulCollaborationPrompt=function(){if(null!=this.teamfulCollaborationPromptDiv)return b.unmountComponentAtNode(this.teamfulCollaborationPromptDiv)},t.prototype.unmountEditAvatar=function(){if(null!=this.editAvatarDiv)return b.unmountComponentAtNode(this.editAvatarDiv)},t.prototype.renderOrgAvatar=function(){var e;if(this.editAvatarDiv=this.$(".org-profile-avatar")[0],null!=this.editAvatarDiv)return e=g.createElement(u,{orgId:this.model.id}),T(e,this.editAvatarDiv)},t.prototype.renderTeamfulCollaborationPrompt=function(){var e;if(this.options.shouldShowTeamfulCollaborationPrompt)return null==this.teamfulCollaborationPromptDiv&&(null!=(e=n("#teamful-collaboration-prompt-target")[0])?this.teamfulCollaborationPromptDiv=e:(n("#surface").append("<div id='teamful-collaboration-prompt-target'></div>"),this.teamfulCollaborationPromptDiv=n("#teamful-collaboration-prompt-target")[0]),this.teamfulCollaborationPromptComponent=g.createElement(v,{orgId:this.model.id,onClose:this.unmountTeamfulCollaborationPrompt})),T(this.teamfulCollaborationPromptComponent,this.teamfulCollaborationPromptDiv)},t}()},4070:function(e,t,r){var n,o,i,a,s,l,u,m,c,d,p={}.hasOwnProperty,h=[].slice;n=r(14),o=r(156),i=r(15),m=r(373),a=r(19),s=r(9),l=r(20),c=r(42),d=r(1).track,u=r(27),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)p.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype}(t,l),t.prototype.viewTitleKey="change logo",t.prototype.initialize=function(){return this.listenTo(this.model,"change:logoHash",this.frameDebounce(this.render))},t.prototype.events={"click .fakefile":function(e){return s.preventDefault(e),n(".js-upload-logo").click()},"change .js-upload-logo":"startUpload","click .js-remove-logo":"removeLogo"},t.prototype.render=function(){var e;return this,e=this.model.toJSON({prefs:!0}),this.$el.html(c.fill("popover_org_logo",e)),this},t.prototype.startUpload=function(e){var t,r,a,l,c,p,g;return this.model,l=n(e.target),t=this.$(".js-error").hide(),null==(a=null!=(c=l[0])&&null!=(p=c.files)?p[0]:void 0)||s.validFileSize(a)?!a&&l.val()?s.uploadFile(i.myToken(),l,this.uploadResult.bind(this)):null!=a?((r=new FormData).append("token",i.myToken()),r.append("file",a),o({url:l.closest("form").attr("action"),data:r,type:"post",processData:!1,contentType:!1,error:(g=this,function(e){return g.uploadResult(new Error(m(e)))}),success:function(e){return function(){return e.uploadResult.apply(e,[null].concat(h.call(arguments)))}}(this),timeout:12e4})):void 0:(t.text(u("images can not be larger than 10mb")).show(),void d("Organization","Logo","Upload Error - File Too Large"))},t.prototype.uploadResult=function(e){var t;return t=this.$(".js-error").hide(),e?(d("Organization","Logo","Error - "+e),t.show().text(e)):(d("Organization","Logo","Use Uploaded - New"),a.hide())},t.prototype.removeLogo=function(e){s.stop(e),o({url:"/1/organizations/"+this.model.id+"/logo",type:"DELETE",success:function(){return d("Organization","Logo","Remove Logo"),a.hide()}})},t}()},4071:function(e,t,r){var n,o,i;o=r(16).logoDomain,i=r(7)("org_detail"),n=r(10).featureFlagClient,e.exports=i.renderable(function(e){var t,r,a,s,l,u,m,c,d,p,h,g,b;return h=e.name,r=e.editable,p=e.logoHash,u=e.isEnterprise,g=e.paysWithPurchaseOrder,l=e.isBusinessClassAdmin,d=e.isInOrg,e.isOrgAdmin,a=e.hasAccount,t=e.accountProblem,c=e.isFullWidth,s=e.hasUnlimitedPowerUps,b=e.upsellEnabled,m=e.isEnterpriseAdmin,i.div(".tabbed-pane-header",function(){return i.div(".tabbed-pane-header-wrapper.u-clearfix",function(){return i.div(".tabbed-pane-header-content",function(){return n.get("btg.team-vertical-selection",!1)?i.div(".org-profile-avatar"):i.a({class:i.classify({"tabbed-pane-header-image":!0,"profile-image":!0,"mod-team":!0,"is-editable":r,"js-change-org-logo":r}),href:"#"},function(){return p?i.img(".profile-image-image",{src:[o,p,"170.png"].join("/")}):i.span(".profile-image-icon.icon-lg.icon-organization"),i.span(".profile-image-change-text",function(){return i.format("change-logo")})}),i.div(".tabbed-pane-header-details",function(){if(i.div(".js-current-details"),r)return i.form(".js-profile-form.hide")})})})}),i.div(".tabbed-pane-nav.u-clearfix",function(){return i.ul(function(){var e;i.li(".tabbed-pane-nav-item",function(){return i.a(".tabbed-pane-nav-item-button.js-org-profile",{"data-tab":"boards",href:["",h].join("/")},function(){return i.format("boards")})}),i.li(".tabbed-pane-nav-item",function(){return i.a(".tabbed-pane-nav-item-button.js-org-members",{"data-tab":"members",href:["",h,"members"].join("/")},function(){return i.format("members")})}),(l||m)&&i.li(".tabbed-pane-nav-item",function(){return i.a(".tabbed-pane-nav-item-button.js-org-power-ups",{"data-tab":"power-ups",href:["",h,"power-ups"].join("/")},function(){return i.icon("business-class"),i.format("power-ups")})}),l&&i.li(".tabbed-pane-nav-item",function(){return i.a(".tabbed-pane-nav-item-button.js-org-export",{"data-tab":"export",href:["",h,"export"].join("/")},function(){return i.icon("business-class"),i.format("export")})}),d&&i.li(".tabbed-pane-nav-item",function(){return i.a(".tabbed-pane-nav-item-button.js-org-account",{"data-tab":"settings",href:["",h,"account"].join("/")},function(){return i.format("settings")})}),d&&!u&&!g&&b&&(e=["",h,"billing"].join("/"),i.li(".tabbed-pane-nav-item",function(){return a?t?i.a(".tabbed-pane-nav-item-button.js-billing",{"data-tab":"billing-issue",href:e},function(){return i.format("billing-issue")}):i.a(".tabbed-pane-nav-item-button.js-billing",{"data-tab":"billing",href:e},function(){return i.format("billing")}):s?void 0:i.a(".tabbed-pane-nav-item-button.dark-hover.js-billing",{"data-tab":"business-class",href:e},function(){return i.span(".icon-sm.icon-business-class.mod-inline.icon-business-class-color"),i.text(" "),i.format("business class")})}))})}),i.div(".tabbed-pane-main-col.u-clearfix",function(){return i.div(".tabbed-pane-main-col-loading.hide.js-loading-page",function(){return i.span(".tabbed-pane-main-col-loading-spinner.spinner")}),i.div({class:i.classify({"tabbed-pane-main-col-wrapper":!0,"js-content":!0,"is-full-width":c})})})})},4072:function(e,t,r){var n,o,i,a,s,l,u,m,c,d,p,h,g={}.hasOwnProperty;n=r(14),o=r(15),i=r(4073),s=r(0),l=r(65),u=r(345).ReactRootComponent,a=r(51).OrganizationFeatures,m=r(20),p=r(277),d=r(33),c=r(36).isDesktop,h=r(1).trackUe,e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)g.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype}(t,m),t.prototype.initialize=function(){return this.listenTo(o.me(),"change:oneTimeMessagesDismissed",this.frameDebounce(this.render)),this.listenTo(this.model,{"change:paidAccount":this.frameDebounce(this.renderReactSection),"change:memberships":this.frameDebounce(this.renderReactSection),"change:billableCollaboratorCount":this.frameDebounce(this.renderReactSection)})},t.prototype.getReactRoot=function(){return s.createElement(u,{},this.getMultiBoardGuestBanner())},t.prototype.renderReactSection=function(){return l.render(this.getReactRoot(),this.$reactRoot[0]),this},t.prototype.render=function(){return null==this.$reactRoot&&(this.$reactRoot=n("<div></div>")),this.model.owned()?(this.$el.append(this.$reactRoot),this.renderReactSection()):this.$el.empty(),this},t.prototype.upgradeableProductCodes=function(){var e,t,r;return e=this.model.get("products"),null!=(null!=(t=this.model.get("paidAccount"))?t.pendingProduct:void 0)&&e.push(this.model.get("paidAccount").pendingProduct),e.filter((r=this,function(e){var t,n;return a.isFeatureEnabled("toBeUpgradedToMBGPlan",e)&&!(null!=(t=r.model.get("paidAccount"))&&null!=(n=t.expirationDates)?n[e]:void 0)}))},t.prototype.getNextProduct=function(){var e;return null==(null!=(e=this.model.get("paidAccount"))?e.billingDates:void 0)?null:this.upgradeableProductCodes().reduce(function(t,r){var n;return null==(null!=(n=e.billingDates)?n[r]:void 0)?t:null==t||t.nextBillingDate>e.billingDates[r]?{code:r,nextBillingDate:e.billingDates[r],interval:a.getInterval(r)}:t},null)},t.prototype.getMultiBoardGuestBanner=function(){var e,t,r,n,s,l,u,m,g;if(e="MultiBoardGuest2-"+this.model.id,o.me().isDismissed(e)||c())return null;if(m=this.getNextProduct(),(n=this.model.paysWithPurchaseOrder()&&this.model.isBusinessClass())&&!a.isFeatureEnabled("toBeUpgradedToMBGPlan",this.model.getProduct()))return null;if(null==m&&!n)return null;if(h("multiboard guests banner","displays","multiboard guests banner","","","by rendering the team settings page",{organizationid:this.model.id,billableGuestCount:this.model.get("billableCollaboratorCount")}),g=this,l=function(){return h("multiboard guests banner","dismisses","multiboard guests banner","","","by clicking the close button in corner",{organizationid:g.model.id}),o.me().dismiss(e)},u=function(e){return function(t,r,n,o,i){if(h("multiboard guests banner","visits",t,"","","by clicking the "+r+" "+n,{organizationid:e.model.id}),null!=o)return i?window.open(o,"_blank"):window.location=o}}(this),s=this.model.get("billableCollaboratorCount"),r=d(new Date("2018-12-17T08:00:00.000Z")),t=n?r:d(new Date(m.nextBillingDate)),s>0)for(;t<r;)t.add(1,"monthly"===m.interval?"month":"year");else t=r;return p.render(function(e){return function(){return p.div(function(){return p.createElement(i,{effectiveDate:t.format("LL"),multiBoardGuests:s,price:m?a.getPrice(m.code):null,interval:m?m.interval:null,teamUrl:"/"+e.model.get("name"),isBCPO:n,onDismissBanner:l,onTrackingEvent:u})})}}(this))},t.prototype.remove=function(){return l.unmountComponentAtNode(this.$reactRoot[0]),t.__super__.remove.apply(this,arguments)},t}()},4073:function(e,t,r){var n,o,i,a,s,l=function(e,t){return function(){return e.apply(t,arguments)}},u={}.hasOwnProperty;o=r(0),s=r(48)("multi_board_guest_banner"),a=r(148),i=r(497).formatMoney,n=function(e){function t(){return this.onClickLink=l(this.onClickLink,this),t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)u.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype}(t,o.Component),t.prototype.displayName="MultiBoardGuestBanner",t.prototype.render=s.renderable(function(){var e,t,r,n,o,l,u,m,c,d,p,h,g;return d=this.props,r=d.effectiveDate,l=d.multiBoardGuests,c=d.price,n=d.interval,p=d.teamUrl,o=d.isBCPO,u=d.onDismissBanner,m=d.onTrackingEvent,t=a("multi-board-guests",l),e=i(c*l),h=p+"/members/guests",s.div(".multi-board-guest-banner",(g=this,function(){return s.button(".icon-lg.icon-close",{onClick:u}),s.div(".multi-board-guest-banner-content",function(){return s.div(".multi-board-guest-banner-notification-section",function(){return s.p({onClick:g.onClickLink},function(){return o?s.format("notification-for-bcpo",{effective_date:r}):l>0?"yearly"===n?s.format("notification-with-guests-per-year",{effective_date:r,url:h,count:t,amount:e}):s.format("notification-with-guests-per-month",{effective_date:r,url:h,count:t,amount:e}):s.format("notification-without-guests",{effective_date:r,url:h,count:t,amount:e})})}),s.div(".multi-board-guest-banner-button-section",function(){return l>0&&s.button(".primary.button-link.multi-board-guest-banner-button-manage",{onClick:function(){return m("team members view","manage-guests","button",h,!1)}},function(){return s.format("manage-guests")}),s.button(".button-link.multi-board-guest-banner-button-learn-more",{onClick:function(){return m("help article","learn-more","button","https://help.trello.com/article/1123-multi-board-guests",!0)}},function(){return s.format("learn-more")})})})}))}),t.prototype.onClickLink=function(e){var t,r,n;if((null!=(t=e.target.dataset)?t.description:void 0)&&(null!=(r=e.target.dataset)?r.type:void 0)&&(null!=(n=e.target.dataset)?n.target:void 0))return this.props.onTrackingEvent(e.target.dataset.description,e.target.dataset.type,e.target.dataset.target)},t}(),e.exports=n},4074:function(e,t,r){var n=r(4075);"string"==typeof n&&(n=[[e.i,n,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};r(22)(n,o);n.locals&&(e.exports=n.locals)},4075:function(e,t,r){(t=e.exports=r(21)(!1)).push([e.i,"._1ZES48JvvaDs2W{padding:4px 8px;background-color:#ff9f1a;border-radius:3px;margin-bottom:8px}._1ZES48JvvaDs2W p{margin:0;padding:0}._1k6L7YvbmLFqLJ{margin-top:4px;width:250px}.regrYmcGxgkEJs{width:250px}._1mh0u4cBAMhD4p{margin-bottom:8px}._2BCgr50F6ruIZ5{display:inline;margin-right:4px}._1YCzB32LisYXHS{font-size:12px;color:#5e6c84;padding:0 6px 0 2px;vertical-align:bottom}._2DZdmHnY2Nw7gI{margin-top:8px}._2DZdmHnY2Nw7gI:focus{outline:1px dotted #000}@media screen and (-webkit-min-device-pixel-ratio:0){._2DZdmHnY2Nw7gI:focus{outline:5px auto -webkit-focus-ring-color}}._2DZdmHnY2Nw7gI ._1b9YOgEMKmdR1d{vertical-align:middle;margin-right:6px}._1Lu0yISayOOQ85{margin-right:4px}._2_IaEbTerNHu4B{background-color:#ebecf0}._2_IaEbTerNHu4B:hover{background-color:#dfe1e6}.W8MFYJ4MB3mekG{color:#eb5a46}._3zXyGBkIdbdjPZ{font-size:16px;vertical-align:middle;margin-right:2px}",""]),t.locals={accountProblemContainer:"_1ZES48JvvaDs2W",inputSpacing:"_1k6L7YvbmLFqLJ",label:"regrYmcGxgkEJs",headerContainer:"_1mh0u4cBAMhD4p",headerText:"_2BCgr50F6ruIZ5",headerContent:"_1YCzB32LisYXHS",editProfile:"_2DZdmHnY2Nw7gI",editIcon:"_1b9YOgEMKmdR1d",submitButton:"_1Lu0yISayOOQ85",cancelButton:"_2_IaEbTerNHu4B",error:"W8MFYJ4MB3mekG",icon:"_3zXyGBkIdbdjPZ"}},4076:function(e,t,r){var n=r(4077);"string"==typeof n&&(n=[[e.i,n,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};r(22)(n,o);n.locals&&(e.exports=n.locals)},4077:function(e,t,r){(t=e.exports=r(21)(!1)).push([e.i,".kt9JIPufaKsVYZ{display:flex;padding:0;margin:0;overflow:hidden;justify-content:center;align-items:center;background-color:#dfe1e6;border-radius:4px;height:85px;width:85px;cursor:default;position:relative}._1R4Z0lJwU5N7Fg{cursor:pointer}._1R4Z0lJwU5N7Fg:focus{outline:1px dotted #000}@media screen and (-webkit-min-device-pixel-ratio:0){._1R4Z0lJwU5N7Fg:focus{outline:5px auto -webkit-focus-ring-color}}._1R4Z0lJwU5N7Fg:hover{background-color:#c1c7d0}._1R4Z0lJwU5N7Fg:hover ._1FzoPWdtZydBzu{display:block;text-decoration:underline}._1R4Z0lJwU5N7Fg:active{background-color:#b3bac5}._1R4Z0lJwU5N7Fg:active ._1FzoPWdtZydBzu{background:rgba(0,0,0,.6)}._1FzoPWdtZydBzu{display:none;color:#fff;background:rgba(0,0,0,.5);position:absolute;bottom:0;width:100%;height:32px;text-align:center;font-weight:700;line-height:32px}._20xjudcgbYv-HH{font-size:55px;padding:0}._1BmO8_gLzW6CQp{background-size:85px 85px;height:85px;width:85px;object-fit:cover}._1eIVcDnWiWVrAD{padding:4px 8px 4px 0}._33xSTMdsjDaVA7{color:#eb5a46}._20gl93o6sH02K9{display:flex;align-items:center;clear:both;position:relative;height:34px}._16aLhu36bDHY0y,._20gl93o6sH02K9{cursor:pointer;width:100%;margin:0;padding:0}._16aLhu36bDHY0y{position:absolute;top:0;left:0;opacity:0;height:100%}._1Svljj-jMU2VRk{border-radius:3px;color:#5e6c84;display:block;margin:2px 0;padding:6px 12px;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition-property:background-color,border-color,box-shadow;transition-duration:85ms;transition-timing-function:ease;text-align:left;padding:0 0 0 8px;margin:8px 0 0;height:34px;width:100%}._1Svljj-jMU2VRk:hover{background-color:rgba(9,30,66,.08);box-shadow:none;border:none;color:#172b4d}._1Svljj-jMU2VRk:active{background-color:#e4f0f6;box-shadow:none;border:none;color:#0079bf}._1Svljj-jMU2VRk:active ._1txiIdocwV7H7r{color:#0079bf}._1Svljj-jMU2VRk:focus{outline:1px dotted #000}@media screen and (-webkit-min-device-pixel-ratio:0){._1Svljj-jMU2VRk:focus{outline:5px auto -webkit-focus-ring-color}}",""]),t.locals={container:"kt9JIPufaKsVYZ",isEditable:"_1R4Z0lJwU5N7Fg",profileImageText:"_1FzoPWdtZydBzu",profileIcon:"_20xjudcgbYv-HH",profileImage:"_1BmO8_gLzW6CQp",uploadIcon:"_1eIVcDnWiWVrAD",error:"_33xSTMdsjDaVA7",uploader:"_20gl93o6sH02K9",hideInput:"_16aLhu36bDHY0y",popoverButton:"_1Svljj-jMU2VRk","icon-sm":"_1txiIdocwV7H7r"}},4083:function(e,t,r){"use strict";r.r(t);var n=r(0),o=r.n(n),i=r(31),a=r(5),s=r(344),l=r(4074),u=r.n(l),m=r(1),c=r(17),d=r(155),p=r(500),h=r(24),g=r(11);function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var r=[],n=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(o)throw i}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var f=r(27),v=Object(a.forTemplate)("org_detail_profile_info"),y=Object(a.forTemplate)("org_detail_profile_edit"),_=Object(a.forNamespace)("team vertical selection"),w=function(e){var t,r,a,l,w,x,M,E,C,k,A,T,O,S=e.orgId,I=b(Object(n.useState)(!1),2),j=I[0],P=I[1],B=b(Object(n.useState)(""),2),N=B[0],z=B[1],L=b(Object(n.useState)(""),2),D=L[0],F=L[1],R=b(Object(n.useState)(""),2),U=R[0],V=R[1],G=b(Object(n.useState)(""),2),H=G[0],$=G[1],W=b(Object(n.useState)(""),2),q=W[0],Z=W[1],Y=b(Object(n.useState)(""),2),J=Y[0],K=Y[1],Q=b(Object(n.useState)(!1),2),X=Q[0],ee=Q[1],te=Object(i.ub)({variables:{id:S}}).data,re=b(Object(i.mc)(),1)[0],ne=null==te?void 0:null===(t=te.organization)||void 0===t?void 0:t.displayName,oe=null==te?void 0:null===(r=te.organization)||void 0===r?void 0:r.teamType,ie=null==te?void 0:null===(a=te.organization)||void 0===a?void 0:a.name,ae=null==te?void 0:null===(l=te.organization)||void 0===l?void 0:l.desc,se=null==te?void 0:null===(w=te.organization)||void 0===w?void 0:w.website,le=!!(null==te?void 0:null===(x=te.organization)||void 0===x?void 0:x.idEnterprise),ue=!le&&(null==te?void 0:null===(M=te.organization)||void 0===M?void 0:M.products)&&(null==te?void 0:null===(E=te.organization)||void 0===E?void 0:E.products.length)>0,me=null==te?void 0:null===(C=te.organization)||void 0===C?void 0:C.prefs.permissionLevel,ce=me&&f(["org perms",me,"name"]),de=null==te?void 0:null===(k=te.organization)||void 0===k?void 0:null===(A=k.paidAccount)||void 0===A?void 0:A.standing,pe=de&&Object(s.isProblem)(de),he=null==te?void 0:null===(T=te.member)||void 0===T?void 0:T.id,ge=he&&!!(null==te?void 0:null===(O=te.organization)||void 0===O?void 0:O.memberships.find(function(e){return e.idMember===he&&"admin"===e.memberType})),be=!X&&!!(H.trim()&&D.trim()&&U);return j?o.a.createElement(o.a.Fragment,null,N&&o.a.createElement("p",{className:u.a.error},N),o.a.createElement("form",{id:"organization-detail-form",onSubmit:Object(d.a)(function(){return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,ee(!0),e.next=4,regeneratorRuntime.awrap(re({variables:{orgId:S,name:H.trim(),displayName:D.trim(),teamType:U,desc:J.trim(),website:q.trim()}}));case 4:P(!1),Object(m.track)("Organization View","Changed Name and Details"),c.Analytics.sendTrackEvent({action:c.Action.edited,actionSubject:c.ActionSubject.button,actionSubjectId:c.ActionSubjectId.changeOrgProfileButton,source:c.Source.orgProfileEditScreen,containers:{organization:{id:S}}}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),z(e.t0.message);case 12:return e.prev=12,ee(!1),e.finish(12);case 15:case"end":return e.stop()}},null,null,[[0,9,12,15]])})},o.a.createElement("label",{className:u.a.labelContainer,htmlFor:"displayName"},y("name")," ",o.a.createElement("input",{id:"displayName",type:"text",value:D,onChange:function(e){return F(e.target.value)},disabled:X,autoFocus:!0})),o.a.createElement(p.TeamTypeSelect,{initialValue:oe||"",onChange:V,isDisabled:X}),o.a.createElement("label",{className:u.a.labelContainer,htmlFor:"name"},y("short-name"),o.a.createElement("input",{id:"name",type:"text",value:H,onChange:function(e){return $(e.target.value)},disabled:X})),o.a.createElement("label",{className:u.a.labelContainer,htmlFor:"website"},_("website",{optional:o.a.createElement("span",{key:"optional"},_("optional"))}),o.a.createElement("input",{id:"website",type:"text",value:q,onChange:function(e){return Z(e.target.value)},disabled:X})),o.a.createElement("label",{className:u.a.labelContainer,htmlFor:"desc"},_("description",{optional:o.a.createElement("span",{key:"description"},_("optional"))}),o.a.createElement("textarea",{id:"desc",value:J,onChange:function(e){return K(e.target.value)},className:u.a.inputSpacing,disabled:X})),o.a.createElement(h.Button,{type:"submit",appearance:"primary",className:u.a.submitButton,isDisabled:!be},f("save")),o.a.createElement(h.Button,{className:u.a.cancelButton,onClick:Object(d.a)(function(){P(!1),Object(m.track)("Organization View","Cancel Edit Profile"),c.Analytics.sendTrackEvent({action:c.Action.clicked,actionSubject:c.ActionSubject.button,actionSubjectId:c.ActionSubjectId.cancelButton,source:c.Source.orgProfileEditScreen,containers:{organization:{id:S}}})})},f("cancel")))):o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:u.a.headerContainer},o.a.createElement("h1",{className:u.a.headerText},ne),le&&o.a.createElement("span",{className:u.a.headerContent},o.a.createElement(g.Icon,{className:u.a.icon,name:g.IconName.Enterprise}),v("enterprise")),ue&&o.a.createElement("span",{className:u.a.headerContent},o.a.createElement(g.Icon,{className:u.a.icon,name:g.IconName.BusinessClass}),v("business-class")),o.a.createElement("span",{className:u.a.headerContent},"private"===me&&o.a.createElement(g.Icon,{className:u.a.icon,name:g.IconName.Private,color:g.IconColor.Red}),"public"===me&&o.a.createElement(g.Icon,{className:u.a.icon,name:g.IconName.Public,color:g.IconColor.Green}),ce)),o.a.createElement("div",null,ae&&o.a.createElement("p",null,ae),se&&o.a.createElement("p",null,o.a.createElement("a",{href:se},se)),pe&&o.a.createElement("div",{className:u.a.accountProblemContainer},o.a.createElement("p",null,_("billing error",{link:o.a.createElement("a",{key:"link",href:"/".concat(ie,"/billing")},_("link"))})))),ge&&o.a.createElement(h.Button,{className:u.a.editProfile,onClick:Object(d.a)(function(){P(!0),F(ne||""),V(oe||""),$(ie||""),Z(se||""),K(ae||""),Object(m.track)("Organization View","Click Edit Profile"),c.Analytics.sendTrackEvent({action:c.Action.clicked,actionSubject:c.ActionSubject.button,actionSubjectId:c.ActionSubjectId.changeOrgProfileButton,source:c.Source.orgProfileEditScreen,containers:{organization:{id:S}}})})},o.a.createElement(g.Icon,{className:u.a.editIcon,name:g.IconName.Edit}),v("edit-profile")))},x=r(4034);r.d(t,"OrganizationDetails",function(){return w}),r.d(t,"EditAvatar",function(){return x.EditAvatar})},4374:function(e,t,r){var n,o,i,a,s,l={}.hasOwnProperty;n=r(1396),o=r(29),i=r(0),a=r(3),s=r(48)("billing"),e.exports=function(e){function t(){this.state={taxes:null,error:null,loading:!0}}return function(e,t){for(var r in t)l.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype}(t,i.Component),t.prototype.displayName="WithSalesTax",t.prototype.UNSAFE_componentWillMount=function(){return this.updateSalesTaxes(this.props)},t.prototype.UNSAFE_componentWillReceiveProps=function(e){return this.updateSalesTaxes(e,this.props)},t.prototype.componentWillUnmount=function(){var e;return null!=(e=this.taxPromise)?e.cancel():void 0},t.prototype.updateSalesTaxes=function(e,t){var r,n;if(null==t&&(t={}),this.willTaxesChange(e,t))return this.setState({taxes:null,error:null,loading:!0}),null!=(r=this.taxPromise)&&r.cancel(),this.taxPromise=this.taxesFromProps(e).then((n=this,function(e){return n.setState({taxes:e,error:null,loading:!1})})).catch(function(e){return function(t){return e.setState({taxes:null,error:t,loading:!1})}}(this))},t.prototype.willTaxesChange=function(e,t){return!a.isEqual(e.subtotals,t.subtotals)||e.dateStandingChange!==t.dateStandingChanged||e.getSalesTaxForSubscriberUrl!==t.getSalesTaxForSubscriberUrl||e.nextBillingDate!==t.nextBillingDate},t.prototype.taxesFromProps=function(e){var t,r,n,i,s;return r=e.salesTaxForSubscriberUrl,n=e.subtotals,t=e.nextBillingDate,i=null!=t?new Date(t):new Date,o.all(n.map((s=this,function(e){return s.calculateSalesTax(r,e,i)}))).then(function(e){return a.pluck(e,"tax")})},t.prototype.calculateSalesTax=function(e,t,r){return n({url:e,data:{subtotal:t,taxDate:r.toISOString()}})},t.prototype.render=s.renderable(function(){var e,t,r,n,o,i,a;return n=(t=this.props).renderContents,o=t.renderError,i=t.renderLoading,a=(r=this.state).taxes,e=r.error,r.loading?i():e?o(e):n(a)}),t}()},4476:function(e,t,r){"use strict";r.r(t),r.d(t,"InviteTeamMembersAutocompleteComponent",function(){return h});var n=r(0),o=r.n(n),i=r(5),a=r(3),s=r(1),l=r(4822),u=r.n(l);function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var r=[],n=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(o)throw i}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var c=r(107),d=r(742),p=Object(i.forTemplate)("org_members"),h=function(e){var t=e.children,r=e.placeholder,i=e.orgId,l=e.model,h=e.onEmailSelected,g=void 0===h?function(){}:h,b=e.optionsAddMembers,f=e.fullWidthButton,v=e.onInviteTeamMembersSuccess,y=m(Object(n.useState)([]),2),_=y[0],w=y[1],x=m(Object(n.useState)(!1),2),M=x[0],E=x[1],C=b?b.invitationMessage:"",k=!!b&&b.changedInviteMessage,A={placeholder:r,onSubmit:function(){var e;e=C?k?"with personalized invite message":"with canned invite message":"with no invite message",Object(s.trackUe)({category:s.Noun.TEAM_VIEW,verb:s.Verb.SENDS,directObj:s.Noun.TEAM_INVITATION,prepositionalObj:e,indirectObj:"with ".concat(_.length," invites"),method:"by clicking invite to team button on team members page",context:{teamId:l.get("id")}});var t=l.addMembers(_,{invitationMessage:C});return v&&(E(!0),v()),t},onAutocompleteSearch:function(e){return e.length>2?c({url:"/1/search/members/",type:"get",data:{query:e,idOrganization:i},dataType:"json"}):[]},displayDetails:!0,displayUsername:!0,submitText:p("invite-to-team"),onRemoveMemberOption:function(e){w(function(t){return t.filter(function(t,r){return r!==e})})},onSelectMemberOption:function(e){w(function(t){return Object(a.uniq)(Object(a.union)(t,Object(a.flatten)([e])),!1,function(e){return e.username?e.username:e.email})}),g()},shouldFocusOnSelectMemberOption:!0,selectedOptions:_,children:t,fullWidthButton:f,submitDisabled:M||!l};return o.a.createElement("div",{className:"org-team-members-autocomplete-container"},o.a.createElement("label",{className:u.a.teamMemberLabel},o.a.createElement("span",{className:u.a.teamMemberLabelText},p("team-members")),o.a.createElement(d,A)))}},4819:function(e,t,r){"use strict";r.d(t,"a",function(){return g});var n=r(0),o=r.n(n),i=r(6),a=r.n(i),s=r(5),l=r(4820),u=r.n(l),m=r(4476),c=r(10);function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var r=[],n=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(o)throw i}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var p=r(37),h=Object(s.forTemplate)("org_members"),g=function(e){var t=e.orgId,r=e.orgDisplayName,i=e.model,s=e.startAnimation,l=e.fullWidthButton,g=e.className,b=e.onInviteTeamMembersSuccess,f=e.preventTextareaResize,v=h("personalized-message-2",{teamName:r}),y=d(Object(n.useState)(v),2),_=y[0],w=y[1],x=d(Object(n.useState)(),2),M=x[0],E=x[1],C=Object(c.useFeatureFlag)("enable-invite-email-message",!1);Object(n.useEffect)(function(){var e;regeneratorRuntime.async(function(r){for(;;)switch(r.prev=r.next){case 0:if(i){r.next=6;break}return r.next=3,regeneratorRuntime.awrap(p.loadOrganizationData(t));case 3:return e=r.sent,r.next=6,regeneratorRuntime.awrap(E(e));case 6:case"end":return r.stop()}})},[i,t]);var k,A,T,O=v!==_;return o.a.createElement("div",{className:a()(u.a.formWrapper,g)},o.a.createElement("div",{className:u.a.heading},h("invite-your-team")),o.a.createElement("div",{className:u.a.subtitle},h("trello-makes-teamwork-your-best-work")),o.a.createElement(m.InviteTeamMembersAutocompleteComponent,{placeholder:h("invite-input-placeholder"),orgId:t,model:i||M,optionsAddMembers:{invitationMessage:_,changedInviteMessage:O},onEmailSelected:s,fullWidthButton:l,onInviteTeamMembersSuccess:b},o.a.createElement("div",{className:u.a.autocompleteHelpText},o.a.createElement("strong",null,h("pro-tip"))," ",h("paste-as-many-emails-here-as-needed")),C&&o.a.createElement("label",{className:u.a.invitationMessageLabel},o.a.createElement("span",{className:u.a.invitationMessageLabelText},h("give-this-message-a-personal-touch")),o.a.createElement("textarea",{className:a()(u.a.invitationMessage,(k={},A=u.a.invitationMessageNoResize,T=f,A in k?Object.defineProperty(k,A,{value:T,enumerable:!0,configurable:!0,writable:!0}):k[A]=T,k)),placeholder:h("personalized-message-placeholder"),value:_,onChange:function(e){w(e.target.value)},maxLength:500}))))}},4820:function(e,t,r){var n=r(4821);"string"==typeof n&&(n=[[e.i,n,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};r(22)(n,o);n.locals&&(e.exports=n.locals)},4821:function(e,t,r){(t=e.exports=r(21)(!1)).push([e.i,"._2ozyzeoG-varDs{width:100%}._2ozyzeoG-varDs .autocomplete-input-container{max-width:none}._2ozyzeoG-varDs .autocomplete-btn{margin-bottom:0}._2XVmjWq1Ds8-i2{color:#172b4d;font-size:14px;font-weight:400;line-height:20px;margin:8px 0 16px}@media only screen and (max-width:750px),only screen and (min-width:751px) and (max-width:900px){._2XVmjWq1Ds8-i2{text-align:center}}._2-T1xH-fhIz60N{color:#172b4d;font-size:24px;font-weight:600;letter-spacing:-.01em;line-height:28px;margin-top:40px;margin-top:0}@media only screen and (max-width:750px),only screen and (min-width:751px) and (max-width:900px){._2-T1xH-fhIz60N{text-align:center}}._2wzRTdc1Iq0neb{color:#172b4d;font-size:14px;font-weight:400;line-height:20px;color:#5e6c84;margin:8px 0 28px}._1WPFYqViAabF58{margin:0}._3XpIQdKAqERycK{font-weight:700;color:#5e6c84;font-size:12px;line-height:16px;margin-top:12px;margin-bottom:4px;display:block;margin-bottom:12px}.wS5q-Owapul__t{background-color:#fafbfc;color:#172b4d;height:156px;margin-bottom:0}.wS5q-Owapul__t,.wS5q-Owapul__t:hover{border:none;box-shadow:inset 0 0 0 2px #dfe1e6}.wS5q-Owapul__t:hover{background-color:#ebecf0}.wS5q-Owapul__t:focus{background:#fff;border:none;box-shadow:inset 0 0 0 2px #0079bf}._12XgQEL5_g2Lmq{resize:none}",""]),t.locals={formWrapper:"_2ozyzeoG-varDs",subtitle:"_2XVmjWq1Ds8-i2",heading:"_2-T1xH-fhIz60N",autocompleteHelpText:"_2wzRTdc1Iq0neb",invitationMessageLabel:"_1WPFYqViAabF58",invitationMessageLabelText:"_3XpIQdKAqERycK",invitationMessage:"wS5q-Owapul__t",invitationMessageNoResize:"_12XgQEL5_g2Lmq"}},4822:function(e,t,r){var n=r(4823);"string"==typeof n&&(n=[[e.i,n,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};r(22)(n,o);n.locals&&(e.exports=n.locals)},4823:function(e,t,r){(t=e.exports=r(21)(!1)).push([e.i,"._3PdcYVtRuHTlvL{font-weight:400;margin:0}._1h9PvS3YBMEHS9{font-weight:700;color:#5e6c84;font-size:12px;line-height:16px;margin-top:12px;margin-bottom:4px;display:block;margin-bottom:12px}",""]),t.locals={teamMemberLabel:"_3PdcYVtRuHTlvL",teamMemberLabelText:"_1h9PvS3YBMEHS9"}},4913:function(e,t,r){var n,o,i,a,s,l,u,m,c={}.hasOwnProperty,d=[].slice;o=r(0),l=r(48)("bulk_add_org_members"),a=r(3),r(73),r(107),n=r(19),r(29),u=r(1).track,i=r(4914),s=/^[^@]+@[a-z0-9-]+(\.[a-z0-9-]+)+$/i,m=/^@[a-z0-9_]{3,}$/,e.exports=function(e){function t(e){var r,n;t.__super__.constructor.apply(this,arguments),this.state={addingMembers:!1,addedMembers:!1,progressText:"",enterpriseName:null!=(r=null!=(n=e.model.getEnterprise())?n.get("displayName"):void 0)?r:"",entry:"",results:[]},this.onInputChanged=this.onInputChanged.bind(this),this.onClose=this.onClose.bind(this),this.addMembers=this.addMembers.bind(this),this._parseEntries=this._parseEntries.bind(this),this._parseEmails=this._parseEmails.bind(this),this._parseUsernames=this._parseUsernames.bind(this)}return function(e,t){for(var r in t)c.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype}(t,o.Component),t.prototype._parseEntries=function(){return this.state.entry.split(/[\s,;"<>]/)},t.prototype._parseEmails=function(){return a.chain(this._parseEntries()).map(function(e){return e.replace(/^\s+|\s+$/g,"").toLowerCase()}).filter(function(e){return s.test(e)}).uniq().sort().value()},t.prototype._parseUsernames=function(){return a.chain(this._parseEntries()).map(function(e){return e.replace(/^\s+|\s+$/g,"").toLowerCase()}).filter(function(e){return m.test(e)}).map(function(e){return e.replace(/@/g,"")}).uniq().sort().value()},t.prototype.onClose=function(){return n.hide()},t.prototype.onInputChanged=function(e){return this.setState({entry:e.target.value})},t.prototype.addMembers=function(e){var t,r,n;return t=this.props.model,this.setState({addingMembers:!0}),r=d.call(this._parseEmails()).concat(d.call(this._parseUsernames())),u("Organization View","Members Page","Bulk Add",r.length),t.addMembers(r,{ignoreErrors:!0},(n=this,function(e){return n.setState({progressText:e.completed+"/"+e.length})})).then(function(e){return function(t){var n,o;for(n in e.setState({addingMembers:!1,addedMembers:!0,results:t}),o=[],t)t[n],o.push(u("Organization View","Members Page","Bulk Add",n,r.length));return o}}(this)).done()},t.prototype.render=l.renderable(function(){var e,t,r,n,o,a,s,u,m,c,d,p,h;return s=this.props.model,t=(m=this.state).addingMembers,e=m.addedMembers,u=m.progressText,c=m.results,o=m.enterpriseName,a=m.entry,t?l.div(function(){return l.div(".spinner.loading"),l.div(".org-members-bulk-add-progress",function(){return l.text(u)})}):e?l.div((h=this,function(){return c._categoryOrder.filter(function(e){var t;return(null!=(t=c[e])?t.length:void 0)>0}).map(function(e){return l.div(".org-members-bulk-add-results-heading",function(){return l.format(["category",e],{enterpriseDisplayName:o}),l.text(" ("),l.text(c[e].length),l.text(")")}),l.div(".org-members-bulk-add-results-list",function(){var t,r,n,o;for(o=[],t=0,r=(n=c[e]).length;t<r;t++)a=n[t],o.push(l.div(".org-members-bulk-add-results-list-item",function(){return l.text(a)}));return o})}),l.div(function(){return l.button(".primary.full",{onClick:h.onClose},function(){return l.format("done")})})})):(n=this._parseEmails().length,p=this._parseUsernames().length,r=n+p,d=s.isBusinessClass()&&!s.isPO(),l.div(".add-member-popup",function(e){return function(){var t,o,u;return l.label(function(){return l.format("emails-or-usernames"),l.textarea(".org-members-bulk-add",{placeholder:l.l("list-placeholder"),onChange:e.onInputChanged,value:a})}),l.div({class:l.classify({"org-members-bulk-add-found":!0,quiet:!0,"bottom-padding":d})},function(){if(n>0&&l.div(".org-members-bulk-add-found-entry",function(){return l.format("email-addresses-found"),l.text(" "+n)}),p)return l.div(".org-members-bulk-add-found-entry",function(){return l.format("usernames-found"),l.text(" "+p)})}),d?(t=r?s.calculateTotalPrice(r):0,s.isPremiumMonthly()&&(u="monthly-subscription"),s.isPremiumYearly()&&(u="yearly-subscription"),o=s.urlRoot+"/"+s.id+"/paidAccount/salesTaxForSubscriber",l.createElement(i,{addSelectedMembers:e.addMembers,price:t,selectedMembersCount:r,subscriptionIntervalKey:u,salesTaxForSubscriberUrl:o})):l.button({class:l.classify({primary:!0,full:!0,disabled:!r}),onClick:e.addMembers},function(){return l.format("add")})}}(this)))}),t}()},4914:function(e,t,r){var n,o,i,a;n=r(4374),o=r(497).formatMoney,i=r(148),a=r(48)("manage_members"),e.exports=a.statelessRenderable("Summary",function(e){var t,r,s,l,u,m,c;return t=e.addSelectedMembers,l=e.price,u=e.salesTaxForSubscriberUrl,m=e.selectedMembersCount,c=e.subscriptionIntervalKey,r=m?"":".disabled",s=i("new member license count",m),a.div(function(){return a.div(".summary-header.quiet",function(){return a.format("summary")}),a.div(".summary",function(){return a.div(".license-count",function(){return a.text(s)}),a.div(".quiet",function(){return a.format(c)}),a.div(".total",function(){return a.createElement(n,{salesTaxForSubscriberUrl:u,subtotals:[l],renderLoading:function(){return a.span(".spinner")},renderError:function(){return a.span()},renderContents:function(e){var t;return t=e[0],a.format("total-price",{price:o(l+t)})}})})}),a.button(".primary.full"+r,{onClick:t,disabled:!m},function(){return a.format("add-to-team")})})})},4915:function(e,t,r){var n,o,i,a,s={}.hasOwnProperty;n=r(28).Storage,o=r(20),i=r(42),a=r(1).track,e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)s.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype}(t,o),t.prototype.viewTitleKey="link google apps domain",t.prototype.events={"click .js-link":"link"},t.prototype.render=function(){var e;return e=this.model.toJSON(),this.$el.html(i.fill("org_link_ga_helper",e,{editable:this.model.editable()})),this},t.prototype.link=function(){a("Organization View","Members Page","Google Apps Marketplace link"),n.isEnabled()&&n.set("idOrganizationLinking",this.model.id)},t}()},4916:function(e,t,r){var n,o,i,a,s,l={}.hasOwnProperty;i=r(0),s=r(48)("org_members"),o=r(5259),a=r(3),n=r(1325).default,e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)l.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype}(t,i.Component),t.prototype.itemsRenderer=function(e,t){return i.createElement("div",{className:"org-members-list",ref:t},e)},t.prototype.render=s.renderable(function(){var e,t,l,u,m,c,d;return d=this.props,l=d.memberItems,u=d.memberTypeFilter,e=d.isFetchingBoards,m=d.orgAllAdminsEnabled,c=d.orgBillingUrl,t=function(t,r){return i.createElement(o,a.extend(l[t],{key:r,isFetchingBoards:e,memberTypeFilter:u,orgAllAdminsEnabled:m,orgBillingUrl:c}))},l.length?s.addElement(i.createElement(n,{itemCount:l.length,itemsRenderer:this.itemsRenderer,renderItem:t,pageSize:100})):s.div(function(){return s.div(".org-members-missing-container",function(){return s.img({className:"org-members-missing-illustration",alt:s.l("no-guest-result"),src:r(5264)}),s.div(".org-members-missing-content",function(){return"guest"===u?s.p(function(){return s.format("no-guest-result")}):s.p(function(){return s.format("no-member-result")})})})})}),t}()},5238:function(e,t,r){var n,o,i,a,s,l,u,m,c,d,p,h,g,b,f,v,y,_,w,x,M,E,C,k,A,T,O,S,I,j,P,B=function(e,t){return function(){return e.apply(t,arguments)}},N={}.hasOwnProperty,z=[].slice;n=r(56),o=r(73),i=r(107),a=r(15),l=r(53),b=r(19),f=r(0),C=r(373),k=r(739).maybeDisplayOrgMemberLimitsError,S=r(48)("manage_members"),A=r(1),I=A.track,j=A.trackUe,_=r(3),E=r(27),g=r(51).OrganizationFeatures,M=r(497).formatMoney,P=r(502).useNonPublicIfAvailable,y=r(375).UpgradePromptFullConnected,m=r(11).IconName,r(36).isDesktop,s=r(4913),c=r(5239),p=r(5240),d=r(5242),h=r(5243),v=r(4914),T=r(16),O=T.siteDomain,x=T.dontUpsell,w=function(e){return _.debounce(e,250)},u=/((([A-Za-z]{3,9}:(?:\/\/)?)(?:[\-;:&=\+\$,\w]+@)?[A-Za-z0-9\.\-]+|(?:www\.|[\-;:&=\+\$,\w]+@)[A-Za-z0-9\.\-]+)((?:\/[\+~%\/\.\w\-_]*)?\??(?:[\-\+=&;%@\.\w_]*)#?(?:[\.\!\/\\\w]*))?)/,e.exports=function(e){function t(e){this.showBulkAddView=B(this.showBulkAddView,this),this._handleError=B(this._handleError,this),this.addSelectedMembers=B(this.addSelectedMembers,this),this.onSearchInputChange=B(this.onSearchInputChange,this),this.toggleMember=B(this.toggleMember,this),this.renderSummary=B(this.renderSummary,this),this.renderAddButton=B(this.renderAddButton,this),this.renderBCPrompt=B(this.renderBCPrompt,this),this.renderAllAdminsEnabledBCPrompt=B(this.renderAllAdminsEnabledBCPrompt,this),this.renderInviteAddName=B(this.renderInviteAddName,this),this.renderLinkGoogleApps=B(this.renderLinkGoogleApps,this),this.renderInvitationLink=B(this.renderInvitationLink,this),this.renderMemberList=B(this.renderMemberList,this),t.__super__.constructor.call(this,e),this.state={isSearching:!1,members:null,searchValue:null,selectedMembers:[]},this.props.model}return function(e,t){for(var r in t)N.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype}(t,f.Component),t.prototype.displayName="ManageOrgMembersComponent",t.prototype.render=S.renderable(function(){var e,t,r,n,o,i,s,l,m,c,d,p,h,b,f,v,y,_;return o=(p=this.state).isSearching,s=p.members,b=p.searchValue,f=p.selectedMembers,l=this.props.model,y=l.isBusinessClass()&&!l.isPO(),v=!l.isPremium(),h=o?"":".hide",t=b&&u.test(b)&&a.me().get("email")!==b,d=l.getProduct(),c=E("add member placeholder"),n=g.isPerUser(d),m=M(g.getPrice(d)),i="yearly"===g.getInterval(d),r="monthly"===g.getInterval(d),e=l.isFeatureEnabled("googleApps")&&(!l.get("prefs").associatedDomain||this.googleAppsFetchFailed)&&l.editable(),S.div(".add-member-popup.team-members-tab-layout",(_=this,function(){var o;return S.div(".manage-member-invitation-section",function(){return S.div(".search-with-spinner",function(){return S.h4(function(){return S.icon("member","enter-email-address-or-name")}),S.input(".search-member.js-autofocus",{type:"text",placeholder:c,onChange:_.onSearchInputChange}),S.div(".spinner.small"+h),S.p(".u-bottom.quiet.bulk-add-members-copy",function(){return S.format("big-team"),S.a(".u-bottom.action-link",{href:"#",onClick:_.showBulkAddView},function(){return S.format("add-many-people-at-once")})})})}),s&&(s.length?_.renderMemberList():t?_.renderInviteAddName():S.div(".quiet.search-text.no-results",function(){return S.format("no-results")})),n&&(null!=(o=l.get("paidAccount"))?o.userCountBilledThisPeriod:void 0)<=l.memberList.length&&S.p(".quiet.u-bottom.per-user",function(){if(r&&S.format("business-class-pricing-is-per-user-adding-a-member-will-increase-the-price-by-jpsprice-per-month",{jpsPrice:m}),i)return S.format("business-class-pricing-is-per-user-adding-a-member-will-increase-the-price-by-jpsprice-per-year",{jpsPrice:m})}),_.renderInvitationLink(),S.div(".js-ad"),e&&_.renderLinkGoogleApps(),v&&(l.get("allAdminsEnabled")?_.renderAllAdminsEnabledBCPrompt():_.renderBCPrompt()),y&&f.length?_.renderSummary():_.renderAddButton()}))}),t.prototype.renderMemberList=function(){var e,t,r;return e=(t=this.state).members,r=t.selectedMembers,S.createElement(h,{members:e,selectedMembers:r,toggleMember:this.toggleMember})},t.prototype.renderInvitationLink=function(){var e,t;return e=this.props.model,t=O+"/"+e.get("name"),S.createElement(c,{apiUrl:e.url(),teamUrl:t,teamId:e.get("id")})},t.prototype.renderLinkGoogleApps=function(){var e,t,r,n;return e=(r=this.props).model,t=r.modelCache,n=e.isBusinessClass()&&!e.isPO(),S.createElement(p,{model:e,modelCache:t,showBillingSummary:n})},t.prototype.renderInviteAddName=function(){var e,t,r,n;return t=(n=this.props).model,r=n.modelCache,e=this.state.searchValue,S.createElement(d,{email:e,model:t,modelCache:r})},t.prototype.renderAllAdminsEnabledBCPrompt=function(){var e;return e={headline:E(["upgrade prompt","team page","invite-popover",x?"headline-auaa-desktop":"headline-auaa-2"]),content:E(["upgrade prompt","team page","invite-popover",x?"content-auaa-desktop":"content-auaa-2"]),cta:E(["upgrade prompt","learn more"]),allowUpsell:!0,hidePlanOverlay:x,ctaLink:x?"/business-class":l.getOrganizationBillingUrl(this.props.model),ctaOnClick:function(){return j("team page","opens","team page bc tab","","","by clicking full upgrade prompt in team page invite members popover",{allAdminsEnabled:!0})},iconName:m.BusinessClass},S.div(".bc-prompt-invite-popover",function(){return S.createElement(y,e)})},t.prototype.renderBCPrompt=function(){var e;return e={headline:E(["upgrade prompt","team page","invite-popover","headline"]),content:E(["upgrade prompt","team page","invite-popover","content"]),cta:E(["upgrade prompt","learn more"]),ctaLink:l.getOrganizationBillingUrl(this.props.model),ctaOnClick:function(){return j("team page","opens","team page bc tab","","","by clicking full upgrade prompt in team page invite members popover")},iconName:m.Member},S.div(".bc-prompt-invite-popover",function(){return S.createElement(y,e)})},t.prototype.renderAddButton=function(){var e,t;return e=(t=this.state.selectedMembers.length)?"":".disabled",S.button(".primary.full"+e,{onClick:this.addSelectedMembers,disabled:!t},function(){return S.format("add-to-team")})},t.prototype.renderSummary=function(){var e,t,r,n,o,i;return n=this.state.selectedMembers,e=this.props.model,o=n.length,t=e.calculateTotalPrice(o),e.isPremiumMonthly()&&(i="monthly-subscription"),e.isPremiumYearly()&&(i="yearly-subscription"),r=e.urlRoot+"/"+e.id+"/paidAccount/salesTaxForSubscriber",S.createElement(v,{addSelectedMembers:this.addSelectedMembers,price:t,salesTaxForSubscriberUrl:r,selectedMembersCount:o,subscriptionIntervalKey:i})},t.prototype.toggleMember=function(e){var t;return t=this.state.selectedMembers.some(function(t){return t===e})?this.state.selectedMembers.filter(function(t){return t!==e}):z.call(this.state.selectedMembers).concat([e]),this.setState({selectedMembers:t})},t.prototype.onSearchInputChange=function(e){var t;return t=e.target.value,this.setState({selectedMembers:[]}),t.length?this.searchMembers(t):this.setState({members:null,searchValue:null})},t.prototype.searchMembers=w(function(e){return e=e.toLowerCase().trim(),this.setState({isSearching:!0,searchValue:e}),i({url:"/1/search/members/",type:"get",data:{idOrganization:this.props.model.id,query:e},dataType:"json"}).then((t=this,function(e){return e=_.chain(e).filter(function(e){return e.id}).map(function(e){return _.extend(e,{avatarHash:P(e,"avatarHash"),avatarUrl:P(e,"avatarUrl"),fullName:P(e,"fullName"),initials:P(e,"initials")})}).sortBy(function(e){var t;return null!=(t=e.fullName)?t.toLocaleLowerCase():void 0}).value(),t.setState({isSearching:!1,members:e})}));var t}),t.prototype.addSelectedMembers=function(){var e,t,r,n,i;if(r=this.state,e=r.members,n=r.selectedMembers,t=this.props.model,!k(this.el,t,null))return n.forEach((i=this,function(r){var n;return n=e.filter(function(e){return e.id===r})[0],t.addMembers(n).catch(o,i._handleError)})),b.hide()},t.prototype._handleError=function(e){var t,r;return t=C(e),n.showLiteralText(t,"error","alert",3e3),I("Invitations","Error: "+(null!=(r=e.message)?r:e.responseText))},t.prototype.showBulkAddView=function(){var e;return e=this.props.model,b.toggle({elem:this.el,getViewTitle:function(){return E(["view title","add members"])},reactElement:f.createElement(s,{key:"bulk add members",model:e})})},t}()},5239:function(e,t,r){var n,o,i,a,s=function(e,t){return function(){return e.apply(t,arguments)}},l={}.hasOwnProperty;n=r(107),o=r(0),i=r(48)("manage_members"),r(27),a=r(1).trackUe,e.exports=function(e){function t(e){this.copyInvitationLink=s(this.copyInvitationLink,this),this.deactivateInvitationLink=s(this.deactivateInvitationLink,this),this.inputDidMount=s(this.inputDidMount,this),this.showLink=s(this.showLink,this),t.__super__.constructor.call(this,e),this.state={linkEnabled:!1,invitationUrl:""}}return function(e,t){for(var r in t)l.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype}(t,o.Component),t.prototype.displayName="InvitationLink",t.prototype.render=i.renderable(function(){var e,t,n,o;return n=this.state,e=n.invitationUrl,t=n.linkEnabled,i.div(".invitation-link-wrapper",(o=this,function(){if(i.div(".invitation-link-header",function(){if(i.h4(function(){return i.img(".icon-share-link",{src:r(1428)}),i.format("share-team-invite-link")}),!t)return i.a(".action-link",{href:"#",onClick:o.showLink},function(){return i.format("create-link")})}),t)return i.div(function(){return i.div(".invitation-link-actions",function(){return i.input({type:"text",readOnly:!0,placeholder:i.l("loading"),ref:o.inputDidMount,value:e,onClick:o.copyInvitationLink}),i.button(".button.primary",{onClick:function(){return o.copyInvitationLink({target:o.invitationInput})}},function(){return i.format("copy")})}),i.a(".quiet",{href:"#",onClick:o.deactivateInvitationLink},function(){return i.format("disable-this-link")})})}))}),t.prototype.showLink=function(){return a("team view","opens","team invitation link","","","through members page invite menu",{teamId:this.props.teamId}),this.setState({linkEnabled:!0})},t.prototype.inputDidMount=function(e){var t,r,o,i;if(this.invitationInput=e,e)return t=(r=this.props).apiUrl,o=r.teamUrl,n({method:"post",url:t+"/invitationSecret"}).get("secret").then((i=this,function(t){var r;return r=o.replace(/(\/b\/[^\/]+|\/[^\/]+$)(.*)$/,"/invite$1/"+t+"$2"),i.setState({invitationUrl:r}),e.focus()})).done()},t.prototype.deactivateInvitationLink=function(e){var t;return t=this.props.apiUrl,this.setState({invitationUrl:"",linkEnabled:!1}),a("team view","disables","team invitation link","","","through members page invite menu",{teamId:this.props.teamId}),n({method:"delete",url:t+"/invitationSecret"}).done()},t.prototype.copyInvitationLink=function(e){return e.target.select(),a("team view","copy","team invitation link","","","through members page invite menu",{teamId:this.props.teamId}),document.execCommand("copy")},t}()},5240:function(e,t,r){var n,o,i,a,s,l=function(e,t){return function(){return e.apply(t,arguments)}},u={}.hasOwnProperty;i=r(0),a=r(48)("manage_members"),s=r(1).track,o=r(19),n=r(4915),e.exports=function(e){function t(e){this.startLinkingGoogleApps=l(this.startLinkingGoogleApps,this),t.__super__.constructor.call(this,e)}return function(e,t){for(var r in t)u.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype}(t,i.Component),t.prototype.displayName="LinkGoogleApps",t.prototype.render=a.renderable(function(){return a.div({class:a.classify({"link-google-apps-with-summary":this.props.showBillingSummary}),onClick:this.startLinkingGoogleApps},function(){return a.div(".pop-over-ad.business-class-ad",function(){return a.img(".icon-google-g.pop-over-ad-icon",{src:r(5241)}),a.div(".ad-copy",function(){return a.span(".title",function(){return a.format("using-google-apps")}),a.span(".learn-more",function(){return a.format("link-google-apps-domain")})})})})}),t.prototype.startLinkingGoogleApps=function(e){var t,r,i;return s("Organization View","Members Page","Start Linking Google Apps Domain"),t=(i=this.props).model,r=i.modelCache,o.pushView({view:n,options:{model:t,modelCache:r}})},t}()},5241:function(e,t,r){e.exports=r.p+"images/services/google-g-logo.2ccbebadc7891e8f0896.svg"},5242:function(e,t,r){var n,o,i,a,s,l,u,m,c,d,p,h=function(e,t){return function(){return e.apply(t,arguments)}},g={}.hasOwnProperty;n=r(56),o=r(73),r(107),m=r(373),i=r(19),a=r(0),c=r(48)("invite_add_name"),d=r(1).track,s=r(9),l=r(3),u=function(e){var t,r,n;return n=/[\s\d\x21-\x2F\x3A-\x40\x5B-\x60\x7B-\x7F]+/,r=/[\d\x21-\x2F\x3A-\x40\x5B-\x60\x7B-\x7F]+/,t=l.compact(s.removeDomainFromEmailAddress(e).split(n)).join(" ").replace(r,""),s.toTitleCase(t)},p=function(e){return!s.validName(e)},e.exports=function(e){function t(e){var r;this._handleError=h(this._handleError,this),this.sendEmailInvite=h(this.sendEmailInvite,this),this.onSubmit=h(this.onSubmit,this),this.onNameChange=h(this.onNameChange,this),t.__super__.constructor.call(this,e),r=u(this.props.email),this.state={err:p(r),fullName:r}}return function(e,t){for(var r in t)g.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype}(t,a.Component),t.prototype.displayName="InviteAddName",t.prototype.UNSAFE_componentWillReceiveProps=function(e){var t,r;return t=e.email,r=u(t),this.setState({err:p(r),fullName:r})},t.prototype.render=c.renderable(function(){var e,t,r,n,o,i,a,s;return n=this.props,e=n.email,n.model,n.modelCache,t=(o=this.state).err,r=o.fullName,i=o.submitting,a=t?"":".hide",c.div({style:{marginTop:"10px"}},(s=this,function(){return c.p(".quiet",function(){return c.format("we dont know that personteam",{email:e})}),c.p(".error"+a,function(){return c.format("full name too short")}),c.form({onSubmit:s.onSubmit},function(){return c.label(function(){return c.format("full-name")}),c.input({type:"text",value:r,onChange:s.onNameChange}),c.input(".wide.primary",{type:"submit",disabled:i,value:c.l("send")})})}))}),t.prototype.onNameChange=function(e){var t;return t=e.target.value,this.setState({err:p(t.trim()),fullName:t})},t.prototype.onSubmit=function(e){if(e.preventDefault(),!this.state.err)return this.sendEmailInvite()},t.prototype.sendEmailInvite=function(){var e,t,r,n,a,s;return t=(a=this.props).email,a.member,n=a.model,a.modelCache,r=this.state.fullName,e={fullName:r,email:t,type:"normal"},this.setState({submitting:!0}),n.addMembers(e).then(function(t){var r,n;for(n in r=t[t._categories.ADDED],l.omit(t,t._categories.ADDED),r)d("Invitations","Send Email Org Invite to New Member","Role: "+e.type);return i.hide()}).finally((s=this,function(){return s.setState({submitting:!1})})).catch(o,this._handleError)},t.prototype._handleError=function(e){var t,r;return t=m(e),n.showLiteralText(t,"error","alert",3e3),d("Invitations","Error: "+(null!=(r=e.message)?r:e.responseText))},t}()},5243:function(e,t,r){var n,o;o=r(48)("manage_members"),n=r(5244),e.exports=o.statelessRenderable("MemberList",function(e){var t,r,i;return t=e.members,r=e.selectedMembers,i=e.toggleMember,o.div(function(){return o.div(".member-list-header",function(){return o.div(".name.quiet",function(){return o.format("name")}),o.div(".select.quiet",function(){return o.format("select")})}),t.forEach(function(e){var t;return t=r.some(function(t){return t===e.id}),o.createElement(n,{isSelected:t,member:e,toggleMember:i})})})})},5244:function(e,t,r){var n,o;n=r(16).avatarDomain,o=r(48)("manage_members"),e.exports=o.statelessRenderable("Member",function(e){var t,r,i,a,s,l,u,m,c,d,p,h,g;return l=e.isSelected,u=e.member,h=e.toggleMember,t=u.avatarHash,i=u.fullName,s=u.initials,a=u.id,g=u.username,r=u.joined,m=function(){if(!r)return h(a)},c=function(e){if(!r&&("Enter"===e.key||" "===e.key))return m()},d=l?".checked":"",p=i+" ("+g+")",o.div(".member-wrapper",{class:o.classify({disabled:r}),tabIndex:0,onClick:m,onKeyUp:c},function(){if(o.div(".member",function(){return t?o.img(".member-avatar",{height:"32",width:"32",src:n+"/"+t+"/50.png",srcSet:n+"/"+t+"/50.png 1x, "+n+"/"+t+"/50.png 2x",alt:p,title:p}):o.span(".member-initials",{title:p},function(){return o.text(s)})}),o.div(".full-name",function(){return o.text(i)}),o.div(".username.quiet",function(){return o.text("@"+g)}),!r)return o.div(".checkbox"+d,function(){return o.span(".icon-lg.icon-check")})})})},5245:function(e,t,r){var n,o,i,a,s,l,u,m,c,d,p,h={}.hasOwnProperty;n=r(53),o=r(79),a=r(5246),i=r(5247),l=r(5248),s=r(19),u=r(9),m=r(20),c=r(3),d=r(42),p=r(1).track,r(27),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)h.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype}(t,m),t.prototype.viewTitleKey="team boards",t.prototype.viewTitleArguments=function(){return{memberName:this.model.get("fullName")}},t.prototype.initialize=function(){var e,t,r,n,o;for(this.org=this.options.org,o=[],t=0,r=(n=this.getMemberBoards()).length;t<r;t++)e=n[t],o.push(this.listenTo(e.memberList,"add remove reset",this.renderBoards));return o},t.prototype.events={"click .js-view-org-boards-for-member":"viewBoards","click .js-view-member-org-cards":"viewCards","click .js-remove-guest-from-team-boards":"removeGuestFromTeamBoards"},t.prototype.render=function(){var e,t;return(t=this.model.toJSON()).isPremium=this.org.isPremium(),e=this.getMemberBoards(),t.canRemoveFromAllTeamBoards=this.org.owned()&&!this.org.isMember(this.model)&&e.length>0&&t.isPremium,t.teamBoardCount=e.length,t.hasBoards=t.teamBoardCount>0,this.org.isFeatureEnabled("orgCards")&&(t.orgCardsUrl=n.getOrganizationMemberCardsUrl(this.org.get("name"),t.username)),this.$el.html(d.fill("org_member_activity",t)),this.renderBoards(),o.update(this.el),this},t.prototype.getMemberBoards=function(){return this.org.boardList.models.filter((e=this,function(t){return c.contains(t.memberList.models,e.model)&&t.isOpen()}));var e},t.prototype.renderBoards=function(){var e,t,r,n,o,a;if((e=this.$(".js-member-boards")).children().detach(),a=[],0!==(r=this.getMemberBoards()).length){for(n=0,o=r.length;n<o;n++)t=r[n],a.push(this.subview(i,t,{member:this.model,organizationBoardCount:r.length}));return this.appendSubviews(a,e)}s.hide()},t.prototype.viewCards=function(){return p("Organization View","Members Page","Activity - View Org Cards")},t.prototype.viewBoards=function(e){u.stop(e),p("Organization View","Members Page","Activity - View Boards"),s.pushView({view:new a({model:this.model,parent:this.org,modelCache:this.modelCache})})},t.prototype.removeGuestFromTeamBoards=function(e){var t;u.stop(e),p("Organization View","Members Page","Activity - Remove From All Team Boards"),t=parseInt(this.$(e.target).closest("b").attr("data-teamboardcount"),10),s.pushView({view:new l({model:this.model,parent:this.org,modelCache:this.modelCache,teamBoardCount:t})})},t}()},5246:function(e,t,r){var n,o,i,a,s={}.hasOwnProperty;r(9),n=r(20),o=r(3),a=r(42),i=r(27),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)s.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype}(t,n),t.prototype.viewTitleKey="boards for member",t.prototype.viewTitleArguments=function(){return{memberName:this.model.get("fullName")}},t.prototype.initialize=function(){this.org=this.options.parent},t.prototype.render=function(){var e,t;return(e=this.model.toJSON()).boards=this.org.boardList.models.filter((t=this,function(e){return o.contains(e.memberList.models,t.model)&&e.isOpen()})).map(function(e){return function(t){var r;return(r=t.toJSON()).memberType=i(["member types",t.getMemberType(e.model)]),r.url=t.getUrl(),r}}(this)),this.$el.html(a.fill("org_boards_for_member",e)),this},t}()},5247:function(e,t,r){var n,o,i,a,s,l,u,m={}.hasOwnProperty;s=r(7)("org_member_activity"),n=r(15),i=r(20),a=r(27),o=r(9),u=r(1).trackUe,l=s.renderable(function(e){var t,r,n,o,i,a,l;return a=e.name,l=e.url,i=e.memberType,n=e.canBeRemoved,o=e.isLoggedInUserBoardMember,t=e.backgroundColor,r=e.backgroundImageThumbnail,s.li(function(){if(s.a(".u-clearfix",{href:l,class:s.classify({removable:n&&o})},function(){return s.div(".org-board-tile",function(){return s.div(".thumbnail",{style:s.stylify({"background-color":t,"background-image":r?"url('"+r+"')":"none"})}),s.div(".org-board-name",function(){return s.span(function(){return s.text(a),s.text(" "),s.span(".quiet",function(){return s.format("membertype",{memberType:i})})})})}),n&&o?s.button(".js-remove-from-board",function(){return s.format("remove")}):n&&!o?s.button(".grayed-out-button",function(){return s.format("remove")}):void 0}),n&&!o)return s.span(".free-team-message",function(){return s.format("free-team-admins-cannot-remove-members")})})}),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)m.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype}(t,i),t.prototype.initialize=function(e){return this.member=e.member,this.organizationBoardCount=e.organizationBoardCount,t.__super__.initialize.apply(this,arguments)},t.prototype.events={"click .js-remove-from-board":"removeFromBoard"},t.prototype.removeFromBoard=function(e){return o.stop(e),this.model.removeMember(this.member),this.member.boardList.remove(this.model),u("team members view","removes","member","","board","member boards pop-over",{organization_board_count:this.organizationBoardCount,remover_member_id:n.myId(),removed_member_id:this.member.id,id_board:this.model.id,id_organization:this.model.get("idOrganization")})},t.prototype.render=function(){var e,t,r,i,s,u;return i=!!this.model.getPref("backgroundTile"),t=this.model.getPref("backgroundImage"),r=i?t:null!=(s=null!=(u=o.smallestPreviewBiggerThan(this.model.getPref("backgroundImageScaled"),400,200))?u.url:void 0)?s:t,e=this.model.getPref("backgroundColor"),this.$el.html(l({url:this.model.getUrl(),name:this.model.get("name"),memberType:a(["member types",this.model.getMemberType(this.member)]),canBeRemoved:this.model.canRemoveMember(this.member),isLoggedInUserBoardMember:this.model.isMember(n.me()),backgroundColor:e,backgroundImageThumbnail:r})),this},t}()},5248:function(e,t,r){var n,o,i,a,s,l,u,m={}.hasOwnProperty;n=r(56),o=r(19),i=r(9),a=r(20),u=r(5249),r(27),s=r(148),l=r(373),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)m.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype}(t,a),t.prototype.viewTitleKey="remove from boards",t.prototype.events={"click .js-confirm-remove-from-team-boards":"confirmRemoveFromBoards"},t.prototype.render=function(){var e,t,r;return t=this.options.teamBoardCount,e=this.options.parent.boardList.filter((r=this,function(e){return e.isMember(r.model)&&e.ownedByMember(r.model)&&1===e.adminList.length})).map(function(e){return e.get("name")}),this.$el.html(u({fullName:this.model.get("fullName"),isOnlyAdminBoardNames:e,teamBoardCount:t,boardsRemainingCountLocalized:s("team boards",t-e.length),teamBoardCountLocalized:s("team boards",t)})),this},t.prototype.showError=function(e){var t;return t=l(e),n.showLiteralText(t,"error","alert",5e3)},t.prototype.confirmRemoveFromBoards=function(e){var t,r,a;return i.preventDefault(e),this.$(".js-confirm-remove-from-team-boards").attr("disabled",!0).addClass("disabled"),(t=(r=this.options.parent).boardList.filter((a=this,function(e){return e.getMembershipFor(a.model)&&(!e.ownedByMember(a.model)||e.ownedByMember(a.model)&&e.adminList.length>1)}))).forEach(function(e){return function(t){return t.removeMember(e.model)}}(this)),t.length&&(n.show("guest removed from team boards","warning","info",3e3),r.trigger("change:memberships")),o.hide()},t}()},5249:function(e,t,r){var n,o;o=r(7)("popover_remove_guest_from_team_boards"),n=r(1404),e.exports=o.renderable(function(e){var t,r,i,a,s;return r=e.fullName,i=e.isOnlyAdminBoardNames,a=e.teamBoardCount,t=e.boardsRemainingCountLocalized,s=e.teamBoardCountLocalized,o.p({style:"padding: 6px"},function(){return 0===i.length?1===a?o.format("remove from all team boards-disclaimer",{fullName:r,teamBoardCountLocalized:s}):o.format("remove from all team boards-disclaimer plural",{fullName:r,teamBoardCountLocalized:s}):(1===i.length?o.format("user is the only board admin",{fullName:r,adminBoardName:i[0]}):o.format("user is the only board admin plural",{fullName:r,adminBoardNames:n(i.slice(0),", "," "+o.l("and")+" ")}),i.length<a?o.p({style:"padding: 0 6px"},function(){return o.format("remove from all other team boards-disclaimer",{fullName:r,boardsRemainingCountLocalized:t})}):void 0)}),i.length===a?o.button(".button-link.primary.u-width-100.js-confirm-remove-from-team-boards",function(){return o.format("remove from all team boards-got-it")}):o.button(".button-link.primary.u-width-100.js-confirm-remove-from-team-boards.negate",function(){return o.format("remove from all team boards-confirm")})})},5250:function(e,t,r){var n,o,i={}.hasOwnProperty;n=r(1423),o=r(53),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)i.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype}(t,n),t.prototype.apiChangeRole=function(e){if(t.__super__.apiChangeRole.apply(this,arguments),"admin"!==e&&this.isAdminAndMe())return o.navigate(o.getOrganizationUrl(this.parent),{trigger:!0})},t}()},5251:function(e,t,r){var n,o,i,a,s,l,u,m,c,d,p,h,g,b,f,v,y={}.hasOwnProperty;r(3),r(68),n=r(15),o=r(11).IconName,h=r(27),a=r(5252),l=r(5258),u=r(4916),s=r(5265),m=r(0),b=r(48)("org_members"),g=r(1),i=g.Noun,p=g.Verb,f=g.trackUe,c=r(375).UpgradePromptFullConnected,d=r(9),v=r(60),r(16).dontUpsell,e.exports=function(e){function t(e){t.__super__.constructor.apply(this,arguments),this.state={filter:"",showAll:!1}}return function(e,t){for(var r in t)y.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype}(t,m.Component),t.prototype.render=b.renderable(function(){return b.div(".org-members-page-layout",(e=this,function(){return b.div(".org-members-page-layout-sidebar",function(){if(b.addElement(e.orgSidebarPropsToElement()),e.props.sidebar.model.isMember(n.me())&&!e.props.sidebar.hasBC)return e.props.sidebar.model.get("allAdminsEnabled")?b.addElement(e.orgAllAdminsAdComponent()):b.addElement(e.orgAdComponent())}),b.div(".org-members-page-layout-list",function(){return e.props.isFetchingCollaborators&&"guest"===e.props.memberTypeFilter?b.div(".spinner.loading.centered"):(b.addElement(e.getOrganizationActionsElement()),b.addElement(e.getMemberListElement()))})}));var e}),t.prototype.orgAllAdminsAdComponent=function(){var e;return e={content:h(["upgrade prompt","team page","members","content-sidebar-auaa-2"]),headline:h(["upgrade prompt","team page","members","headline-sidebar-auaa-2"]),cta:h(["upgrade prompt","learn more"]),ctaLink:this.props.sidebar.billingUrl,ctaOnClick:function(){return f({category:i.TEAM_PAGE,verb:p.OPENS,directObj:i.BC_MODAL,method:"by clicking full upgrade prompt in team page members tab",context:{allAdminsEnabled:!0}})},iconName:o.Member,isDarkTheme:!0},m.createElement(c,e)},t.prototype.orgAdComponent=function(){var e;return e={content:h(["upgrade prompt","team page","members","content-2"]),headline:h(["upgrade prompt","team page","members","headline-2"]),cta:h(["upgrade prompt","learn more"]),ctaLink:this.props.sidebar.billingUrl,ctaOnClick:function(){return f({category:i.TEAM_PAGE,verb:p.OPENS,directObj:i.BC_MODAL,method:"by clicking full upgrade prompt in team page members tab"})},iconName:o.Member,isDarkTheme:!0},m.createElement(c,e)},t.prototype.isGuest=function(){return this.props.collaboratorModels.some(function(e){return e.isMe})},t.prototype.orgSidebarPropsToElement=function(){var e,t;return e=v(this.props.sidebar,{orgIsEmpty:this.props.orgIsEmpty,orgMemberCount:this.props.orgMemberModels.length,guestMemberCount:this.props.collaboratorModels.length,memberTypeFilter:this.props.memberTypeFilter,showGuestTab:n.isLoggedIn()&&(this.props.sidebar.model.isMember(n.me())||this.isGuest()),onMemberTypeChange:(t=this,function(e){return t.setState({filter:""}),t.props.changeMemberTypeFilter(e)})}),m.createElement(l,e)},t.prototype.getMemberListElement=function(){var e,t,r,n,o,i,a,l,c,d,p,h,g,b;if(e=(h=this.props).collaboratorModels,o=h.memberTypeFilter,c=h.orgIsEmpty,d=h.orgMemberModels,l=h.orgIsBC,t=h.isFetchingBoards,i=h.orgAllAdminsEnabled,a=h.orgBillingUrl,p="free",l&&(p="bc"),r="guest"===o?s:u,g=(n="guest"===o?e:"team-member"===o?c?[]:d:void 0).filter((b=this,function(e){return b.isVisibleMember(e)})),n.length)return m.createElement(r,{memberTypeFilter:o,memberItems:g,orgIsBC:l,orgType:p,isFetchingBoards:t,orgAllAdminsEnabled:i,orgBillingUrl:a})},t.prototype.isVisibleMember=function(e){return(!e.hidden||this.state.showAll)&&(!this.state.filter||d.buildFuzzyMatcher(this.state.filter)(e.fullName))},t.prototype.getOrganizationActionsElement=function(){var e,t;return e=v(this.props.sidebar,{orgId:this.props.orgId,orgMemberCount:this.props.orgMemberModels.length,orgIsEmpty:this.props.orgIsEmpty,guestMemberCount:this.props.collaboratorModels.length,isEnterpriseAdmin:this.props.isEnterpriseAdmin,memberTypeFilter:this.props.memberTypeFilter,hasBC:this.props.sidebar.hasBC,ownsOrg:this.props.sidebar.ownsOrg,orgName:this.props.orgName,orgIsPO:this.props.orgIsPO,filter:this.state.filter,onFilterChange:(t=this,function(e){return t.setState({filter:e})}),onShowAllChange:function(e){return function(t){return e.setState({showAll:t})}}(this)}),m.createElement(a,e)},t}()},5252:function(e,t,r){var n,o,i,a,s,l,u,m={}.hasOwnProperty;a=r(0),s=r(10).featureFlagClient,n=r(5414).InviteTeamMembers,o=r(4476).InviteTeamMembersAutocompleteComponent,i=r(5255),u=r(48)("org_members"),l=r(36).isDesktop(),e.exports=function(e){function t(e){t.__super__.constructor.apply(this,arguments),this.state={showingAll:!1,personalizedTeamInvitesEnabled:s.get("walrus.personalized_team_invites",!1)}}return function(e,t){for(var r in t)m.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype}(t,a.Component),t.prototype.render=u.renderable(function(){var e,t,s,m,c,d,p,h,g,b,f,v,y,_,w,x,M,E,C,k,A,T;return C=this.props,t=C.canManageMembers,C.openManageMembers,s=C.filter,f=C.onFilterChange,v=C.onShowAllChange,d=C.inviteTeamMembers,x=C.orgMemberCount,_=C.orgIsEmpty,m=C.guestMemberCount,p=C.isEnterpriseAdmin,C.orgName,h=C.memberTypeFilter,y=C.orgId,c=C.hasBC,M=C.ownsOrg,w=C.orgIsPO,g=C.model,e=C.bulkAddMemberErrors,k=this.state,A=k.showingAll,E=k.personalizedTeamInvitesEnabled,T=this,function(){return A=!T.state.showingAll,T.setState({showingAll:A}),v(A)},b=function(e){return g.updateBulkAddMemberErrors(null)},u.div(function(){return u.div(".org-members-section",{class:u.classify({active:"team-member"===h})},function(){return!_||e?u.div(".org-members-actions-container",function(){return u.div(".org-members-actions-header",function(){return u.h1(function(){if(u.format("team-members"),u.raw("&nbsp;"),u.span(".team-member-count",function(){return u.text("("+x+")")}),c)return u.icon("enterprise")}),u.p(function(){return g.belongsToRealEnterprise()&&(t||p)?u.format("team-members-view-enterprise"):c&&t&&!w?u.format("team-members-view-bc"):u.format("team-members-view")})}),e&&u.addElement(a.createElement(i,{statusMessages:e,onDismiss:b})),u.div(".org-members-actions",function(){return u.div(".org-members-actions-search",function(){return u.input(".org-members-page-navigation-input",{type:"text",placeholder:u.l("filter-by-name"),value:s,onChange:function(e){return f(e.target.value)}})}),u.div(".org-members-actions-add",function(){if(t)return u.b(d,{class:"primary button-link autowrap"},function(){return u.icon("add-member","invite-team-members")})})})}):(u.div(".org-members-empty-container",function(){return E?u.createElement(n,{orgId:y,model:g,orgDisplayName:g.get("displayName")}):(u.img({className:"org-members-team-illustration",alt:u.l("invite-your-team"),src:r(5256)}),u.div(".org-members-empty-content",function(){return u.h1(".org-members-heading",function(){return u.format("invite-your-team")}),u.p(".org-members-subheading",function(){return u.format("trello-works-best")}),u.addElement(a.createElement(o,{placeholder:u.l("invite-input-placeholder"),orgId:y,model:g}))}))}),!c||w||p?void 0:u.p(".org-members-empty-bc-billing.quiet",function(){return u.icon("enterprise"),u.format("inviting-new-members-will-update-billing")}))}),u.div(".org-members-section",{class:u.classify({active:"guest"===h})},function(){return m?u.div(".org-members-actions-container",function(){return u.div(".org-members-actions-header",function(){return u.h1(function(){return u.format("guests"),u.raw("&nbsp;"),u.span(".guest-member-count",function(){return u.text("("+m+")")})}),u.p(function(){return g.belongsToRealEnterprise()&&(t||p)?(u.format("guests-view"),u.raw("<br/>"),u.format("guests-view-enterprise")):c&&M&&t&&!l?u.format("guests-view-bc"):u.format("guests-view")})}),e&&u.addElement(a.createElement(i,{statusMessages:e,onDismiss:b})),u.div(".org-members-actions",function(){return u.div(".org-members-actions-search",function(){return u.input(".org-members-page-navigation-input",{type:"text",placeholder:u.l("filter-by-name"),value:s,onChange:function(e){return f(e.target.value)}})})})}):u.div(".org-members-empty-container",function(){return u.img({className:"org-members-guest-illustration",alt:u.l("boards-shared-with-friends"),src:r(5257)}),u.div(".org-members-empty-content",function(){return u.h1(".org-members-heading",function(){return u.format("boards-shared-with-friends")}),u.p(".org-members-subheading",function(){return u.format("if-client-contractors")})})})})})}),t}()},5253:function(e,t,r){var n=r(5254);"string"==typeof n&&(n=[[e.i,n,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};r(22)(n,o);n.locals&&(e.exports=n.locals)},5254:function(e,t,r){(t=e.exports=r(21)(!1)).push([e.i,"._2cjYZcP98PeOVS{align-items:flex-start;display:flex;padding:0 64px;text-align:left}@media only screen and (max-width:750px),only screen and (min-width:751px) and (max-width:900px),only screen and (min-width:901px) and (max-width:1280px){._2cjYZcP98PeOVS{align-items:center;flex-direction:column}}._3Z-f1YeQfWWnEG{padding:20px 28px 16px 96px}@media only screen and (max-width:750px),only screen and (min-width:751px) and (max-width:900px),only screen and (min-width:901px) and (max-width:1280px){._3Z-f1YeQfWWnEG{order:-1;padding:0 0 48px}}",""]),t.locals={inviteTeamMembers:"_2cjYZcP98PeOVS",invitationIllustration:"_3Z-f1YeQfWWnEG"}},5255:function(e,t,r){var n,o,i,a,s={}.hasOwnProperty;o=r(3),n=r(0),a=r(48)("org_members"),i=r(27),e.exports=function(e){function t(e){t.__super__.constructor.call(this,e)}return function(e,t){for(var r in t)s.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype}(t,n.Component),t.prototype.render=a.renderable(function(){var e,t,r,n;return r=this.props,n=r.statusMessages,t=r.onDismiss,e=o.without(n._categories,n._categories.ADDED),a.div(".org-members-actions-status-error",function(){var r,s,l,u,m,c;for(a.div(".org-members-actions-status-error-close",function(){return a.icon("close",{onClick:t})}),a.format("add-member-error"),c=[],s=0,l=(u=o.values(e)).length;s<l;s++)r=u[s],(null!=(m=n[r])?m.length:void 0)>0&&c.push(a.p(".message",function(){return a.span(".error-message-text",function(){if(a.format("add-member-error-"+r),a.text(" "),"member-unconfirmed"===r)return a.a(".js-resend-confirmation-email",{href:"#"},function(){return a.text(i(["templates","header_warning_banner","resend-email"]))})}),a.text(" "),a.text(n[r].join(", "))}));return c})}),t}()},5256:function(e,t,r){e.exports=r.p+"images/organization/new-team.b0d9f513a05be128693e.svg"},5257:function(e,t,r){e.exports=r.p+"images/organization/guests.a76a836ff67e77d7f911.svg"},5258:function(e,t,r){var n,o,i,a={}.hasOwnProperty;n=r(0),i=r(48)("org_members"),o=r(23).TeamTestIds,e.exports=function(e){function t(e){t.__super__.constructor.apply(this,arguments),this.state={showingAll:!1}}return function(e,t){for(var r in t)a.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype}(t,n.Component),t.prototype.render=i.renderable(function(){var e,t,r,n,a,s,l,u,m,c,d;return(u=this.props).canShowAll,u.openManageMembers,u.filter,u.onFilterChange,a=u.onShowAllChange,r=u.memberTypeFilter,n=u.onMemberTypeChange,s=u.orgIsEmpty,l=u.orgMemberCount,e=u.guestMemberCount,m=u.showGuestTab,t=u.isFetchingCollaborators,c=this.state.showingAll,d=this,function(){return c=!d.state.showingAll,d.setState({showingAll:c}),a(c)},i.div(function(){return i.div(".org-members-page-navigation-list",function(){return i.div(".org-members-options",function(){return i.div(".org-members-filter-list",function(){return i.h1(function(){return i.format("members-of-team-boards")}),i.ul(".org-members-filter",function(){if(i.li(function(){return i.a({className:"team-member"===r?"active":void 0,href:"#","data-test-id":o.TeamMembersLink,onClick:function(e){return n("team-member")}},function(){if(i.format("team-members"),!s)return i.raw("&nbsp;"),i.text("("+l+")")})}),m)return i.li(function(){return i.a({className:"guest"===r?"active":void 0,href:"#",onClick:function(e){return n("guest")}},function(){if(i.format("guests"),t&&(i.raw("&nbsp;"),i.span(".spinner.spinner--inline.small")),e)return i.raw("&nbsp;"),i.text("("+e+")")})})})})})})})}),t}()},5259:function(e,t,r){var n,o,i,a,s={}.hasOwnProperty;o=r(0),a=r(48)("member_list_item_detail"),i=r(148),n=r(5412).OrgMemberRestrictedPermissionButton,r(10).featureFlagClient,e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)s.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype}(t,o.Component),t.prototype.render=a.renderable(function(){var e,t,r,o,s,l,u,m,c,d,p,h,g,b,f,v,y,_,w,x,M,E,C,k,A,T,O,S,I,j,P,B,N,z,L,D;return O=(B=this.props).orgAllAdminsEnabled,S=B.orgBillingUrl,y=B.isVirtual,h=B.isDeactivated,D=B.viewTitle,u=B.fullName,L=B.username,z=B.showGoogleApps,m=B.gMail,g=B.isFetchingBoards,s=B.boardCount,f=B.isOrgMember,N=B.showActivity,t=B.allowTypeChange,j=B.orgMemberType,e=B.allowReactivate,b=B.isMe,l=B.canRemove,I=B.orgIsBC,P=B.ownsOrg,c=B.hidden,T=B.onViewActivity,B.onViewBoards,k=B.onRoleChange,C=B.onRemoveOrDeactivate,o=B.avatarHash,r=B.avatarDomain,d=B.initials,v=B.isOrganizationAdmin,E=B.onReactivateClick,A=B.onUnhideMember,x=B.onHideMember,M=B.onInviteMember,w=B.onAddToTeam,_=B.memberTypeFilter,p=!I&&O&&v,a.div({class:a.classify({"member-list-item-detail":!0})},function(){return a.div({class:a.classify({member:!0,"member-no-menu":!0,"member-virtual":y,"member-deactivated":h})},function(){return o?a.img(".member-avatar",{height:"30",width:"30",alt:D,title:D,src:[r,o,"30.png"].join("/"),srcSet:[r,o,"30.png 1x"].join("/")+", "+[r,o,"50.png 2x"].join("/")}):a.span(".member-initials",{title:D},function(){if(d)return a.text(d)}),h||v&&a.span(".member-type.admin",{title:a.l("this-member-is-an-admin-of-this-organization")}),a.span(".member-gold-badge",{title:a.l("this-member-has-trello-gold")})}),a.div(".details",function(){return a.p(".name-line",function(){return a.span(".full-name",function(){return a.text(u)})}),a.p(".u-bottom.quiet",function(){if(L&&a.span(".quiet.u-inline-block",function(){return a.format("at-username",{username:L})}),z&&m)return L&&a.text("- "),a.icon("google"),a.text(m)})}),a.div(".options",function(){if(N&&(g?a.div(".option.quiet-button",function(){return a.span(".spinner.centered.small")}):a.b(T,".option.quiet-button",function(){return a.format("on-boardcount",{boardCount:i("boards",s)})})),f){if(p?a.createElement(n,{orgBillingUrl:S,orgMemberType:j}):t?a.b(k,".option.button-link.role-button",function(){return a.text(j),a.icon("overflow-menu-horizontal")}):a.p(".option.status.quiet",function(){return a.text(j)}),e&&a.b(E,".option.quiet-button",function(){return a.format("reactivate")}),b)return a.b(C,{class:a.classify({option:!0,"button-link":!0,"remove-button":!0,disabled:!l}),disabled:!l},function(){return I?a.icon("close","leave-ellipsis"):a.icon("close","leave")});if(P)return a.b(C,{class:a.classify({option:!0,"button-link":!0,"remove-button":!0,disabled:!l}),disabled:!l},function(){return a.icon("close","remove-ellipsis")})}else{if(z)return c?a.b(A,".option.quiet-button",function(){return a.format("always-show")}):"guest"!==_&&a.b(x,".option.quiet-button",function(){return a.format("dismiss")}),a.b(M,".option.button-link.primary",function(){return a.icon("add","add-member")});if(t)return a.b(w,".option.button-link",function(){return a.format("add-to-team")})}})})}),t}()},5260:function(e,t,r){var n=r(5261);"string"==typeof n&&(n=[[e.i,n,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};r(22)(n,o);n.locals&&(e.exports=n.locals)},5261:function(e,t,r){(t=e.exports=r(21)(!1)).push([e.i,"._1Q1Tsm1-Mf2yjR{float:left;position:relative}._2QHGiFeX1fe40-{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;background-color:rgba(9,30,66,.04);border-radius:3px;border:none;box-shadow:none;box-sizing:border-box;color:#a5adba;display:block;height:32px;margin:4px 0 2px 8px;min-width:95px;padding:6px 12px;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}._2QHGiFeX1fe40-:focus{outline:1px dotted #000}@media screen and (-webkit-min-device-pixel-ratio:0){._2QHGiFeX1fe40-:focus{outline:5px auto -webkit-focus-ring-color}}._3nLNGhjwkmIfM-{float:right}._27pf0Nr9o3dkrI{box-shadow:0 0 16px -1px rgba(9,30,66,.25)}",""]),t.locals={wrapper:"_1Q1Tsm1-Mf2yjR",button:"_2QHGiFeX1fe40-",icon:"_3nLNGhjwkmIfM-",prompt:"_27pf0Nr9o3dkrI"}},5262:function(e,t,r){var n=r(5263);"string"==typeof n&&(n=[[e.i,n,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};r(22)(n,o);n.locals&&(e.exports=n.locals)},5263:function(e,t,r){(t=e.exports=r(21)(!1)).push([e.i,'._3tZgGLfAd_SL_g{padding-top:5px;position:absolute;right:0;top:100%;width:255px;z-index:1}._3tZgGLfAd_SL_g:after{background:#fff;content:"";display:block;height:10px;position:absolute;right:20px;top:0;transform:rotate(45deg);width:10px}',""]),t.locals={interactiveTooltip:"_3tZgGLfAd_SL_g"}},5264:function(e,t,r){e.exports=r.p+"images/organization/missing.930abc84ebe27331d32a.svg"},5265:function(e,t,r){var n,o,i,a,s,l={}.hasOwnProperty;o=r(0),s=r(48)("org_members"),n=r(4916),i=r(36).isDesktop(),a=r(27),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)l.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype}(t,o.Component),t.prototype.render=s.renderable(function(){var e,t,r,l,u,m;return m=this.props,t=m.memberItems,r=m.memberTypeFilter,l=m.orgIsBC,u=m.orgType,e=m.isFetchingBoards,i&&(u="free"),s.div(function(){var m,c;if(m=t.filter(function(e){return e.boardCount>1}),c=t.filter(function(e){return 1===e.boardCount}),(m.length>0||0===c.length&&0===m.length)&&s.div(".org-guest-section",function(){return s.h3(function(){if(s.format("multi-board-guests",{count:m.length,className:".org-members-space-right"}),l)return s.icon("business-class")}),s.p(function(){if(s.format(u+"-multi-board-guests-are-members-of"),!i)return s.text(" "),"https://help.trello.com/article/1123-multi-board-guests",s.a({href:"https://help.trello.com/article/1123-multi-board-guests",target:"_blank"},function(){return s.text(a(["templates","select_member","learn-more"]))})}),s.addElement(o.createElement(n,{memberItems:m,memberTypeFilter:r,isFetchingBoards:e}))}),c.length>0||0===c.length&&0===m.length)return s.div(".org-guest-section",function(){return s.h3(function(){return s.format("single-board-guests",{count:c.length})}),s.p(function(){return s.format(u+"-single-board-guests-are-members-of")}),s.addElement(o.createElement(n,{memberItems:c,memberTypeFilter:r,isFetchingBoards:e}))})})}),t}()},5266:function(e,t,r){var n,o,i,a,s,l,u,m,c,d={}.hasOwnProperty;n=r(14),r(156),o=r(15),i=r(53),a=r(19),s=r(9),l=r(20),m=r(42),c=r(1).track,u=r(27),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)d.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype}(t,l),t.prototype.viewTitleKey=function(){return this.org.isPremium()?"remove or deactivate member":"remove member"},t.prototype.initialize=function(){return this.org=this.options.org,this.onRemoveSuccess=this.options.onRemoveSuccess},t.prototype.events={"click .js-deactivate":"deactivateMember","click .js-soft-remove":"removeMember"},t.prototype.isEnterpriseAdmin=function(e){var t;return this.org.isEnterprise()&&(null!=(t=this.org.getEnterprise())?t.isAdmin(e):void 0)},t.prototype.render=function(){var e,t;return t=this.org.getMemberType(this.model,{ignoreEntAdminStatus:!0}),(e=this.model.toJSON()).orgMemberType=u(["member types",t]),e.ownsOrg=this.org.owned(),e.orgIsBC=this.org.isPremium(),e.isDeactivated="deactivated"===t,e.isOrgMember="public"!==t,e.isVirtual="virtual"===t,e.canDeactivate=(this.org.isPremOrgAdmin(o.me())||this.isEnterpriseAdmin(o.me()))&&!e.isVirtual&&!e.isDeactivated,e.isMe=o.isMe(this.model),this.$el.html(m.fill("org_remove_or_deactivate_member",e)),this},t.prototype._checkIfLostVisibility=function(){var e;if(o.isMe(this.model)&&(!this.org.isEnterprise()||!(null!=(e=this.org.getEnterprise())?e.isAdmin(this.model):void 0)))return i.navigate("/",{trigger:!0})},t.prototype.deactivateMember=function(e){s.stop(e),this.org.deactivateMember(this.model),this._checkIfLostVisibility(),a.hide()},t.prototype.removeMember=function(e){var t;s.stop(e),n(this.el).find("#hardRemove").is(":checked")||"deactivated"===this.org.getMemberType(this.model,{ignoreEntAdminStatus:!0})?(t="Hard Remove",this.org.memberList.removeMembership(this.model,{mass:!0,success:this.onRemoveSuccess})):(t="Soft Remove",this.org.memberList.removeMembership(this.model,{success:this.onRemoveSuccess})),c("Organization","Remove Member From Organization",t),a.hide(),this._checkIfLostVisibility()},t}()},5412:function(e,t,r){"use strict";r.r(t);var n=r(0),o=r.n(n),i=r(375),a=r(11),s=r(5),l=r(1),u=r(5260),m=r.n(u),c=r(32),d=r(5262),p=r.n(d);function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var r=[],n=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(o)throw i}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var g=r(16),b=r(36),f=Object(s.forNamespace)("upgrade prompt"),v=Object(s.forNamespace)(["upgrade prompt","team page","members"]),y=function(e){var t=e.orgBillingUrl,r=e.orgMemberType,s=function(){var e=h(Object(n.useState)(!1),2),t=e[0],r=e[1],i=function(){return r(!1)};return Object(c.useShortcut)(i,{scope:c.Scope.Global,key:c.Key.Escape}),{hideTooltip:i,showTooltip:function(){return r(!0)},toggleTooltip:function(){return r(!t)},InteractiveTooltip:function(e){var r=e.children;return t?o.a.createElement("div",{className:p.a.interactiveTooltip}," ",r):null}}}(),u=s.toggleTooltip,d=s.hideTooltip,y=s.InteractiveTooltip;return o.a.createElement("div",{className:m.a.wrapper,onMouseLeave:function(e){e.relatedTarget&&e.relatedTarget!==window&&d()}},o.a.createElement("button",{className:m.a.button,onClick:u},r,o.a.createElement(a.Icon,{name:a.IconName.Help,small:!0,quiet:!0,className:m.a.icon})),o.a.createElement(y,null,o.a.createElement(i.UpgradePromptFullConnected,{className:m.a.prompt,headline:g.dontUpsell?v("headline-membership-tooltip-auaa-desktop"):v("headline-membership-tooltip-auaa-2"),content:g.dontUpsell?v("content-membership-tooltip-auaa-desktop"):v("content-membership-tooltip-auaa-2"),cta:f("learn more"),iconName:a.IconName.Member,ctaLink:g.dontUpsell?"/business-class":t,ctaOnClick:function(){Object(l.trackUe)({category:l.Noun.TEAM_PAGE,verb:l.Verb.OPENS,directObj:l.Noun.TEAM_PAGE_BC_TAB,method:"by clicking full upgrade prompt in team page membership type",context:{allAdminsEnabled:!0}}),Object(b.isDesktop)()&&d()},overlayOnContinue:d,onDismiss:d,hidePlanOverlay:Boolean(g.dontUpsell),allowUpsell:!0})))};r.d(t,"OrgMemberRestrictedPermissionButton",function(){return y})},5414:function(e,t,r){"use strict";r.r(t);var n=r(0),o=r.n(n),i=r(5253),a=r.n(i),s=r(934),l=r(4819);function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var r=[],n=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(o)throw i}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var c=function(e){var t=m(Object(n.useState)(1),2),r=t[0],i=t[1];return o.a.createElement("div",{className:a.a.inviteTeamMembers},o.a.createElement(l.a,u({startAnimation:function(){i(r+1)}},e)),o.a.createElement("div",{className:a.a.invitationIllustration},o.a.createElement(s.a,{animationStep:r})))};r.d(t,"InviteTeamMembers",function(){return c})}}]);
//# sourceMappingURL=organization-members-view.e4166f38a45a845e9336.js.map